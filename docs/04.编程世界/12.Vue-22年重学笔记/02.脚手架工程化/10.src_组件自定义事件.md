---
title: src_ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶
date: 2022-08-17 17:24:25
permalink: /pages/f12dab/
categories:
  - ç¼–ç¨‹ä¸–ç•Œ
  - Vue-22å¹´é‡å­¦ç¬”è®°
  - è„šæ‰‹æ¶å·¥ç¨‹åŒ–
tags:
  -
titleTag: åŸåˆ›
---

## ä»£ç 

### ` ä»£ç è·¯å¾„ `

```sh
$ tree -N
.
â”œâ”€â”€ App.vue
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ School.vue
â”‚   â””â”€â”€ Student.vue
â””â”€â”€ main.js
```

### `App.vue`

```vue
<template>
  <div class="app">
    <h1>{{msg}} {{studentName}}</h1>

    <!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°ç±»å‹çš„propså®ç°ï¼šå­ç»™çˆ¶ä¼ é€’æ•°æ® -->
    <School :getSchoolName="getSchoolName"/>

    <!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å®ç°ï¼šå­ç»™çˆ¶ä¼ é€’æ•°æ®(ç¬¬ä¸€ç§å†™æ³•ï¼Œä½¿ç”¨@æˆ–v-on) -->
    <!-- <Student @atguigu="getStudentName" @demo="m1"/> -->

  <!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å®ç°ï¼šå­ç»™çˆ¶ä¼ é€’æ•°æ®(ç¬¬äºŒç§å†™æ³•ï¼Œä½¿ç”¨ref) -->
    <Student ref="student" @click.native="show"/>
  </div>
</template>

<script>
    import School from './components/School.vue'
    import Student from './components/Student.vue'
    export default {
        name:'App',
        components:{School,Student},
        data() {
          return {
            msg:'ä½ å¥½å•Šï¼',
            studentName:'',
          }
        },
        methods: {
          getSchoolName(name){
            console.log('æ”¶åˆ°schoolnameäº†',name);
          },
          getStudentName(name,...params){
            console.log('æ”¶åˆ°studentnameäº†',name,params);
            this.studentName = name
          },
          m1(){
            console.log('demoäº‹ä»¶è¢«è°ƒç”¨äº†');
          },
          show(){
            alert(123)
          }
        },
        mounted() {
          // this.$refs.student.$on('atguigu',this.getStudentName) // ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶
          // this.$refs.student.$once('atguigu',this.getStudentName) // ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆä¸€æ¬¡æ€§ï¼‰
        },
    }
</script>

<style>
.app{
  background-color: gray;
}
</style>
```

### `School.vue`

```vue
<template>
  <div class="school">
    <h2> å­¦æ ¡åç§°ï¼š{{name}} </h2>
    <h2> å­¦æ ¡åœ°å€ï¼š{{address}} </h2>

    <!-- é€šè¿‡propsç»„ä»¶ä¼ é€’æ•°æ® -->
    <button @click="sendSchoolName">ç‚¹æˆ‘å°†å­¦æ ¡åå‘ç»™APP</button>
  </div>
</template>

<script>
    export default {
        name:'School',
        props:['getSchoolName'],
        data() {
            return {
              name:'shangguigua',
              address:'beijing'
            }
        },
        methods: {
          sendSchoolName(){
            this.getSchoolName(this.name)
          }
        },
    }
</script>

<style  scoped>
.school{
  background-color: blue;
}
</style>
```

### `Student.vue`

```vue
<template>
  <div class="student">
    <h2> å­¦ç”Ÿå§“åï¼š{{name}} </h2>
    <h2> å­¦ç”Ÿæ€§åˆ«ï¼š{{sex}} </h2>
    <h1>{{number}}</h1>
    <button @click="add">ç‚¹æˆ‘ç»™number++</button>
    <!-- é€šè¿‡propsç»„ä»¶ä¼ é€’æ•°æ® -->
    <button @click="sendStudentName">ç‚¹æˆ‘å°†å­¦ç”Ÿåå‘ç»™APP</button>
    <button @click="unbind">ç‚¹æˆ‘è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶</button>
    <button @click="death">ç‚¹æˆ‘é”€æ¯å½“å‰Studentç»„ä»¶çš„å®ä¾‹</button>
  </div>
</template>

<script>
    export default {
        name:'Student',
        data() {
            return {
              name:'eryajf',
              sex:'ç”·',
              number:1
            }
        },
        methods: {
          add(){
            console.log('addè¢«è°ƒç”¨äº†');
            this.number++
          },
          sendStudentName(){
            // è§¦å‘studentç»„ä»¶èº«ä¸Šçš„atguiguäº‹ä»¶
            this.$emit('atguigu',this.name,666,888)
            this.$emit('demo')
          },
          unbind(){
            // this.$off('atguigu') // è§£ç»‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶
            // this.$off(['atguigu','demo']) // è§£ç»‘å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶
            this.$off() // è§£ç»‘æ‰€æœ‰è‡ªå®šä¹‰äº‹ä»¶
          },
          death(){
            this.$destroy() // é”€æ¯äº†å½“å‰Studentç»„ä»¶çš„å®ä¾‹ï¼Œé”€æ¯åæ‰€æœ‰Studentå®ä¾‹çš„è‡ªå®šä¹‰äº‹ä»¶å…¨ğŸ™…ğŸ»ä¸å¥æ•ˆ
          }
        },
    }
</script>

<style  scoped>
.student{
  background-color: orange;
}
</style>
```

### `main.js`

```js
import Vue from "vue"
import App from './App.vue'

Vue.config.productionTip = false

new Vue({
    el: '#app',
    components:{App},
    render: h => h(App)
});
```

## ç¬”è®°

1.  ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼š<strong style="color: red">å­ç»„ä»¶ ===> çˆ¶ç»„ä»¶</strong>
2.  ä½¿ç”¨åœºæ™¯ï¼šA æ˜¯çˆ¶ç»„ä»¶ï¼ŒB æ˜¯å­ç»„ä»¶ï¼ŒB æƒ³ç»™ A ä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨ A ä¸­ç»™ B ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆ<span style="color: red">äº‹ä»¶çš„å›è°ƒåœ¨ A ä¸­</span>ï¼‰ã€‚
3.  ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š
   1.  ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š`<Demo @atguigu="test"/>`  æˆ– `<Demo v-on: atguigu="test"/>`
   2.  ç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š
      ```js
      <Demo ref="demo"/>
      ......
      mounted(){
         this.$refs.xxx.$on('atguigu',this.test)
      }
      ```
   3.  è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨ `once` ä¿®é¥°ç¬¦ï¼Œæˆ– `$once` æ–¹æ³•ã€‚
4.  è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š`this.$emit('atguigu',æ•°æ®)`
5.  è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ `this.$off('atguigu')`
6.  ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨ `native` ä¿®é¥°ç¬¦ã€‚
7.  æ³¨æ„ï¼šé€šè¿‡ `this.$refs.xxx.$on('atguigu',å›è°ƒ)` ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒ<span style="color: red">è¦ä¹ˆé…ç½®åœ¨ methods ä¸­</span>ï¼Œ<span style="color: red">è¦ä¹ˆç”¨ç®­å¤´å‡½æ•°</span>ï¼Œå¦åˆ™ this æŒ‡å‘ä¼šå‡ºé—®é¢˜ï¼
