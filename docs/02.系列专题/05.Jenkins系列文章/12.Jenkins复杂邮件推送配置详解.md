---
title: Jenkins复杂邮件推送配置详解
date: 2018-05-03 19:49:52
permalink: /pages/350.html
categories:
  - 系列专题
  - Jenkins系列文章
tags:
  - jenkins
  - email
---

书接上回，这次配置一个真正好用的邮件通知。

首先需要一个插件的支持。

Email Extension Template

不用多说，直接安装不在话下。

然后同样在构建后动作中就会多了两项关于邮件的配置了

![image](http://t.eryajf.net/imgs/2021/09/e0089619556e4f31.jpg)

第二个是配置邮件通知模板，有点扯，暂且不管，说白了，就是还没发现怎么使用。

重头戏是第一个，点击，走你。

在使用之前，有必要对其各项配置以及含义进行一个了解疏通，可能有人觉得没有必要，只想要一个纯粹的直接快速配置的效果，请出门左转去简单邮件通知里寻找答案。

这里打算刨根问题，彻底摸清这个邮件通知的含义与各项功能。

先来一副全家福看下都有什么。

![image](http://t.eryajf.net/imgs/2021/09/2fc168861ec3f744.jpg)

接下来，让我们一条一条进行查看解读。

本人英语不好，因此就借助于谷歌浏览器翻译来进行解读。

## Editable Email Notification（名称：可编辑的电子邮件通知）

![image](http://t.eryajf.net/imgs/2021/09/834b82c963155011.jpg)

### 1，Disable Extended Email Publisher（禁用邮件扩展）

![image](http://t.eryajf.net/imgs/2021/09/d848562da8b07521.jpg)

旁边的解释已经说得很明白了，清楚的东西，我也就不多废话，用白话解释就是选中此选项，会在此项目中禁用邮件通知功能，以适合暂时做测试等的需要频繁发布的项目。

### 2，Project From

![image](http://t.eryajf.net/imgs/2021/09/e1e15eca7f85a448.jpg)

在一些版本相对老一些Jenkins或者插件中并没有这个选项，暂时自己没有测试，应该是填写项目构建人！

### 3，Project Recipient List（重点：邮件收件人）

![image](http://t.eryajf.net/imgs/2021/09/f4dcc80d1f4117fa.jpg)

下边介绍差不多也说的比较清楚了。其中的变量待会会有一个汇总的讲解，这个地方可以自定义填写需要收到邮件的人的邮件，在公司当中，也可以填写邮件组来简化操作。可以直接回车来进行编辑。

如下图：

![image](http://t.eryajf.net/imgs/2021/09/6c811bc6b2a74915.jpg)

### 4，Project Reply-To List

![image](http://t.eryajf.net/imgs/2021/09/5f54740c2753f17f.jpg)

这个地方应该是标题的定义，不过这里不用理会，直接使用默认的就行。所谓默认的，就是等会儿在全局配置那里设置的。

### 5，Content Type

![image](http://t.eryajf.net/imgs/2021/09/6c169e9a2c1a4578.jpg)

发送内容的类型，这个地方也不用管，直接使用默认的。就是用主配置页面使用的值。

### 6，Default Subject

![image](http://t.eryajf.net/imgs/2021/09/4ec08a9178164c36.jpg)

暂不清楚详细功能

### 7，Default Content

![image](http://t.eryajf.net/imgs/2021/09/3d567a56262951f0.jpg)

事实上，这个依然使用主配置的内容，邮件内容，这里暂时先不列出。后边注意事项，是在下边进行个性化配置的时候可以进行其他定义。高级部分，绝对高级。

### 8，Attachments

![image](http://t.eryajf.net/imgs/2021/09/9c1bacc788477cc4.jpg)

这个附件功能高级了，而且运用得当的话，会锦上添花，曾在某处看到一个人利用这个附件功能直接将打包好的安卓包通过附件发送给测试人员，这个真的是智能不已了！

地址（https://www.jianshu.com/p/2afb099f2a79）

食用方法简单介绍一下：在方框中定义一个路径，在那个路径下每次应用都会被覆盖，用户下载的就会是新构建出来的包了。默认的家目录是$WORKSPACE

### 9，Attach Build Log

![image](http://t.eryajf.net/imgs/2021/09/eee59132af3769aa.jpg)

没啥说的，帮助信息已经说的很清楚了。很建议发送，这样遇到一些问题的时候，排查直接去邮件，方便不止一两倍。

对了，还有一个小问题，很需要注意，有时候构建有配置更新，可能会有非常大的日志，这个时候就要在主配置文件当中，设置附件大小的限制了。

去到系统管理—》系统设置—》主配置这里，有一个附件大小的配置，如下图：

![image](http://t.eryajf.net/imgs/2021/09/ebecd01b909d85f8.jpg)

## Content Token Reference（内容令牌参考）

这里是一个超级丰富嗨皮的地方。先看下截图：

![image](http://t.eryajf.net/imgs/2021/09/f64cd183e86b9578.jpg)

（截图略有误差，请到源地址查看，就这张小图就截了好几分钟，最终也并没有达到自己想要的效果，就酱吧。）

这里详细介绍了当你想要自己定义html的邮件内容，请勇入此坑！

### 10，Pre-send Script

![image](http://t.eryajf.net/imgs/2021/09/a7c00dd647171103.jpg)

这里好像有点鸡肋，但是其实是有实际意义的，只不过没有必要在这里过于大费周章。

### 11，Post-send Script

![image](http://t.eryajf.net/imgs/2021/09/8825d44143244485.jpg)

看法同上。

### 12，Additional groovy classpath

![image](http://t.eryajf.net/imgs/2021/09/553337d647e0eb27.jpg)

好吧，连帮助文档都找不到跑哪儿了。大概意思应该是这样，groovy是用于邮件内容编写的一种语言，可以编写多个，存储在系统当中，然后在这个地方配置不同多个，在不同情况下，进行不同的触发。

### 13，Save to Workspace

![image](http://t.eryajf.net/imgs/2021/09/6923f005470cc2d3.jpg)

如图，不解释。

### 14，Triggers（触发器，这个是最厉害的功能了，不过一般情况下，不使用。嘿嘿！！）

这次先不上图，让我自己啰嗦几句，这个触发器拥有详细的功能，可以根据不同的情况将邮件发给不同的人。

![image](http://t.eryajf.net/imgs/2021/09/9964b1523b416c56.jpg)

这个地方应该从外往内看，就能比较容易理解其中的含义了。

### 1，通过最后一句话，我们点开添加触发器

![image](http://t.eryajf.net/imgs/2021/09/3b134690abd09a8a.jpg)

在这里选择不同的构建情况，在这种不同的构建情况下，触发我们定义的不同的情况。

### 2，看看不同情况都有哪些具体配置。

![image](http://t.eryajf.net/imgs/2021/09/dff8a6096a867fa5.jpg)

默认的是一个always发送邮件的，不论怎样都发送。这里不仅可以定义发送给谁，还可以定义发送的内容，主题，附件，构建日志等等信息，可以说非常强大了！！

本地详解到此结束！！！

关于本功能配置的详细介绍，请点击：[Jenkins构建之后邮件推送配置](https://wiki.eryajf.net/pages/374.html)
