(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{415:function(t,a,s){"use strict";s.r(a);var e=s(0),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_0-前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-前言"}},[t._v("#")]),t._v(" 0. 前言")]),t._v(" "),a("p",[t._v("​ 现如今，我们很多公司都会将代码托管在自建的 GitLab 仓库中，很适合团队协作。但随之而来的这种开源版本的工具在一定程度上存在缺陷，比如"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("今天要折腾的 SourceGraph 这个工具，就是来解决开源版本 GitLab 不支持的全局检索功能。")]),t._v(" "),a("h2",{attrs:{id:"_1-安装部署-sourcegraph"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装部署-sourcegraph"}},[t._v("#")]),t._v(" 1. 安装部署 SourceGraph")]),t._v(" "),a("p",[t._v("​ "),a("a",{attrs:{href:"https://docs.sourcegraph.com/?_ga=2.180805039.92929300.1636808002-910905162.1635833823",target:"_blank",rel:"noopener noreferrer"}},[t._v("部署参考链接"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_1-1-安装部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装部署"}},[t._v("#")]),t._v(" 1.1 安装部署")]),t._v(" "),a("p",[t._v("直接按照官方操作傻瓜式安装，以下安装是为了快速体验特性，官方推荐生产部署采用 docker-compose 或者直接部署在 k8s 中，"),a("a",{attrs:{href:"https://docs.sourcegraph.com/admin/install",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--publish")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7080")]),t._v(":7080 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--publish")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:3370:3370 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--volume")]),t._v(" ~/.sourcegraph/config:/etc/sourcegraph "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--volume")]),t._v(" ~/.sourcegraph/data:/var/opt/sourcegraph sourcegraph/server:3.33.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v("--publish就是我们大家习惯的暴露端口的-p哦")])]),t._v(" "),a("p",[a("code",[t._v("7080是访问sourceGraph服务端口，3370是Grafana的端口")])]),t._v(" "),a("h3",{attrs:{id:"_1-2-配置-nginx-代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-配置-nginx-代理"}},[t._v("#")]),t._v(" 1.2 配置 Nginx 代理")]),t._v(" "),a("p",[t._v("​ 配置完成后，我们需要配置 Nginx 来将其服务进行代理，当然也可以访问本机http://x.x.x.x:7080;")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("location  / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        proxy_set_header session-name "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_session")]),t._v("-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header userId "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_userId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header X-Real-IP "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header X-Forwarded-Proto "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$scheme")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_pass http://10.6.6.26:7080"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"_1-3-访问页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-访问页面"}},[t._v("#")]),t._v(" 1.3 访问页面")]),t._v(" "),a("p",[t._v("​ 访问如下代表成功，首次进入是可以注册一个管理员身份快速体验，按页面提示操作即可。")]),t._v(" "),a("p",[t._v("​ "),a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/11/1972ab50a62d3e8c.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_2-配置-sourcegraph-网站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-sourcegraph-网站"}},[t._v("#")]),t._v(" 2. 配置 Sourcegraph 网站")]),t._v(" "),a("h3",{attrs:{id:"_2-1-配置仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-配置仓库"}},[t._v("#")]),t._v(" 2.1 配置仓库")]),t._v(" "),a("p",[t._v("入口："),a("code",[t._v("Site admin")]),t._v(" > "),a("code",[t._v("Repositories")]),t._v(" > "),a("code",[t._v("Manage code hosts")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/11/b806cc3a76bd4daa.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_2-2-配置-gitlab-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置-gitlab-仓库"}},[t._v("#")]),t._v(" 2.2 配置 GitLab 仓库")]),t._v(" "),a("p",[t._v("点击上图中"),a("code",[t._v("GitLab Self-Managed")]),t._v("，下图中的配置参考"),a("a",{attrs:{href:"https://docs.sourcegraph.com/admin/external_service/gitlab",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1),t._v("，下面的代码 SourceGraph 本身提供给了我们，这点还是很不错的，因为他的官方文档写的很生硬；当我们点击了"),a("code",[t._v("GitLab Self-Managed")]),t._v("之后,会出现如下图中画圈的部分，你想要添加那种类型的仓库，都可以直接生成代码，完事后添加即可，等待其同步完成。")]),t._v(" "),a("p",[t._v("​ 创建 gitlab 的 token 参考"),a("a",{attrs:{href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html#creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),a("OutboundLink")],1),t._v("，建议授权范围设置为 read_user, read_api, read_repository")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://<你的gitlab域名>"')]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<access token>"')]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"projectQuery"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"projects?membership=true&archived=no"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/11/53a2c5c768715977.png",alt:""}})]),t._v(" "),a("p",[t._v("若你配置了 GitLab 授权登录（"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("下文即将介绍），希望"),a("strong",[t._v("查找的仓库权限能跟授权账号走")]),t._v("。可以在仓库配置中加入 "),a("code",[t._v("Enforce permissions (OAuth)")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authorization"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"identityProvider"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oauth"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("申明")]),t._v(" "),a("p",[a("strong",[t._v("原创文章"),a("Badge",{attrs:{text:"eryajf"}}),t._v("，未经授权，严禁转载，侵权必究！此乃文中随机水印，敬请读者谅解。")],1)]),t._v(" "),a("div",{staticClass:"custom-block right"},[a("p",[t._v("Copyright "),a("a",{attrs:{href:"https://wiki.eryajf.net",target:"_blank",rel:"noopener noreferrer"}},[t._v("二丫讲梵"),a("OutboundLink")],1),t._v(" 版权所有")])])]),t._v(" "),a("h3",{attrs:{id:"_2-3-配置-gitlab-授权访问-sourcegraph"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-配置-gitlab-授权访问-sourcegraph"}},[t._v("#")]),t._v(" 2.3 配置 GitLab 授权访问 SourceGraph")]),t._v(" "),a("p",[t._v("SourceGraph 支持与 GitLab 权限打通，这样我们就不需要自己维护用户规则，全部采用 GitLab 的权限，即使 GitLab 是通过 Ldap，且继承用户所用的的权限，所以在代码检索时请注意，只能搜索自己有权限的仓库。配置参考"),a("a",{attrs:{href:"https://docs.sourcegraph.com/admin/auth",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网链接"),a("OutboundLink")],1),t._v("，还支持很多种认证方式。")]),t._v(" "),a("p",[t._v("入口："),a("code",[t._v("Site admin")]),t._v(" > "),a("code",[t._v("Configuration")]),t._v(" > "),a("code",[t._v("Site configuration")])]),t._v(" "),a("h3",{attrs:{id:"_2-3-1-配置-gitlab-的授权应用程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-配置-gitlab-的授权应用程序"}},[t._v("#")]),t._v(" 2.3.1 配置 gitlab 的授权应用程序，")]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://docs.gitlab.com/ee/integration/oauth_provider.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitLab 授权链接"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ol",[a("li",[t._v("在 GitLab 右上角选择你的头像")]),t._v(" "),a("li",[t._v("选择 Settings （或是 Edit profile）")]),t._v(" "),a("li",[t._v("在左侧边栏选择 Applications")]),t._v(" "),a("li",[t._v("输入 Name，Redirect URI，Scopes(授权范围设置为 api、read_user)。Redirect URI 是用户授权回调的地址，形如：http://sgdev2.example.com/.auth/gitlab/callback,仅仅替换域名即可\n点击保存，就能看到 Application ID 和 Secret。")]),t._v(" "),a("li",[t._v("此处的小坑，"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("是采用 nginx 代理的，所以我的 443 是在 nginx 上，真正的 sourceGraph 是没有 https 的，故回调 url 不要填写 https")])])]),t._v(" "),a("p",[t._v("如下图，便是"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("配置好的 GitLab 的")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/11/e6c9dd8373e9fd2d.png",alt:""}})]),t._v(" "),a("p",[t._v("然后，回到 sourcegraph 网站站点进行配置。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ol",[a("li",[t._v("在你的 sourcegraph 站点的右上角选择你的头像")]),t._v(" "),a("li",[t._v("选择 Site admin")]),t._v(" "),a("li",[t._v("在左侧边栏选择 Site configuration")]),t._v(" "),a("li",[t._v("点击 Add GitLab sign-in，会自动添加如下授权代码。")])])]),t._v(" "),a("p",[t._v("当然，此处 sourceGraph 也是有代码提示,如下图")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auth.providers"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      // See https://docs.sourcegraph.com/admin/auth"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gitlab for instructions")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gitlab"')]),t._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"displayName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GitLab"')]),t._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<GitLab URL>"')]),t._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clientID"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<client ID>"')]),t._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clientSecret"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<client secret>"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/11/b806cc3a76bd4daa.png",alt:""}})]),t._v(" "),a("p",[a("code",[t._v("type")]),t._v(" 和 "),a("code",[t._v("displayName")]),t._v(" 保持默认。"),a("code",[t._v("<GitLab URL>")]),t._v(" 改为你的 GitLab 地址，"),a("code",[t._v("<client ID>")]),t._v(" 改为之前获得的 "),a("code",[t._v("Application ID")]),t._v("，"),a("code",[t._v("<client secret>")]),t._v(" 改为 "),a("code",[t._v("Secret")]),t._v("，保存即可。")]),t._v(" "),a("p",[t._v("此时你退出，再登录就会出现，GitLab 授权按钮。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/11/d738a813e448800e.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_3-查询结果导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-查询结果导出"}},[t._v("#")]),t._v(" 3. 查询结果导出")]),t._v(" "),a("p",[t._v("​ sourceGraph 是支持查询结果导出的，支持 csv 插件，"),a("a",{attrs:{href:"https://sourcegraph.com/extensions/sourcegraph/search-export?_ga=2.173954603.92929300.1636808002-910905162.1635833823",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置参考"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_4-小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-小结"}},[t._v("#")]),t._v(" 4. 小结")]),t._v(" "),a("p",[t._v("按理安装完 Sourcegraph，进行仓库配置后，站点就能正常投入使用了。关于用户授权，是"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("经历一番探索的总结，为有此需求的人在阅读官方文档中即将陷入迷茫提供的一个提示。")]),t._v(" "),a("p",[t._v("温馨提示：")]),t._v(" "),a("ul",[a("li",[t._v("若是你通过 GitLab 授权管理用户，需确保网站管理员为代码仓库的管理员，这样能保证用户的搜索池全面。")]),t._v(" "),a("li",[t._v("免费版的 Sourcegraph 只能注册 10 个用户哦！")]),t._v(" "),a("li",[t._v("升级应该在 Sourcegraph 的连续次要版本之间进行。例如，如果您正在运行 Sourcegraph 3.1，并且想要升级到 3.3，则应该先升级到 3.2，再升级到 3.3。")]),t._v(" "),a("li",[t._v("查询语法请参考官方文档哦，"),a("a",{attrs:{href:"https://docs.sourcegraph.com/code_search/reference/queries",target:"_blank",rel:"noopener noreferrer"}},[t._v("查询语法"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("当然如果您觉得页面查询不爽，source 官方也是只吃了命令行查询工具，什么版本的都支持，可操考其 github 进行配置，非常简单，"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("懒得写了。"),a("a",{attrs:{href:"https://github.com/lu-you",target:"_blank",rel:"noopener noreferrer"}},[t._v("诗人"),a("OutboundLink")],1),t._v("平时喜欢用命令行，然后通过 jq 工具来处理。\n"),a("ul",[a("li",[t._v("官网 api 查询，"),a("a",{attrs:{href:"https://docs.sourcegraph.com/api/graphql",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("客户端配置，"),a("a",{attrs:{href:"https://github.com/sourcegraph/src-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),a("OutboundLink")],1)])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);