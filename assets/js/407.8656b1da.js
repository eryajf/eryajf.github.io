(window.webpackJsonp=window.webpackJsonp||[]).push([[407],{748:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-安装-dns-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-dns-插件"}},[s._v("#")]),s._v(" 1，安装 DNS 插件")]),s._v(" "),a("p",[s._v("在 Master 节点 上进行安装操作。")]),s._v(" "),a("p",[s._v("下载安装文件：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://github.com/kubernetes/kubernetes/releases/download/v1.8.6/kubernetes.tar.gz")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xzvf kubernetes.tar.gz")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /root/kubernetes/cluster/addons/dns")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv  kubedns-svc.yaml.sed kubedns-svc.yaml")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把文件中$DNS_SERVER_IP替换成10.254.0.2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed -i 's/$DNS_SERVER_IP/10.254.0.2/g' ./kubedns-svc.yaml")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv ./kubedns-controller.yaml.sed ./kubedns-controller.yaml")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把$DNS_DOMAIN替换成cluster.local")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed -i 's/$DNS_DOMAIN/cluster.local/g' ./kubedns-controller.yaml")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls *.yaml")]),s._v("\nkubedns-cm.yaml  kubedns-controller.yaml  kubedns-sa.yaml  kubedns-svc.yaml\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master1 dns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create -f .")]),s._v("\nconfigmap "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube-dns"')]),s._v(" created\ndeployment "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube-dns"')]),s._v(" created\nserviceaccount "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube-dns"')]),s._v(" created\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube-dns"')]),s._v(" created\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h2",{attrs:{id:"_2-部署-dashboard-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署-dashboard-插件"}},[s._v("#")]),s._v(" 2，部署 dashboard 插件")]),s._v(" "),a("p",[s._v("在 master 节点部署")]),s._v(" "),a("p",[s._v("新增部署配置文件")]),s._v(" "),a("p",[s._v("需要 2 个文件。")]),s._v(" "),a("h3",{attrs:{id:"_1-文件一。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-文件一。"}},[s._v("#")]),s._v(" 1，文件一。")]),s._v(" "),a("p",[a("code",[s._v("dashboard.yaml")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1beta1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRoleBinding\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cluster"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("admin\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" extensions/v1beta1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kubernetes.io/cluster-service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("addonmanager.kubernetes.io/mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Reconcile\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("annotations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("scheduler.alpha.kubernetes.io/critical-pod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceAccountName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" registry.docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cn.com/kubernetesdashboarddev/kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("amd64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("head\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("limits")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 300Mi\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100Mi\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("livenessProbe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("httpGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initialDelaySeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeoutSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tolerations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CriticalAddonsOnly"')]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Exists"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br")])]),a("h3",{attrs:{id:"_2-文件二。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-文件二。"}},[s._v("#")]),s._v(" 2，文件二。")]),s._v(" "),a("p",[a("code",[s._v("dashboard-svc.yaml")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kubernetes.io/cluster-service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("addonmanager.kubernetes.io/mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Reconcile\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dashboard\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NodePort\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodePort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"_3-分别执行-2-个部署文件进行创建。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-分别执行-2-个部署文件进行创建。"}},[s._v("#")]),s._v(" 3，分别执行 2 个部署文件进行创建。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("kubectl create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" dashboard.yaml\n\nkubectl create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" dashboard-svc.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_4-如何访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-如何访问"}},[s._v("#")]),s._v(" 4，如何访问？")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kubectl")]),s._v(" get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\nNAME                                    READY     STATUS              RESTARTS   AGEIP            NODE\nkube-dns-778977457c-2rwdj               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/3       ErrImagePull        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m172.30.24.2   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nkubernetes-dashboard-8665cd4dfb-jzxg6   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ContainerCreating   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          26s"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("首先查看一下部署的服务是否正常？")]),s._v(" "),a("p",[s._v("如上可以很清晰的看到 咱们部署的 kubernetes-dashboard 在 192.168.106.4 上面已经部署了。")]),s._v(" "),a("p",[s._v("那我们可以去访问下：")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://192.168.106.4:8888/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://192.168.106.4:8888"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_5-部署-heapster-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-部署-heapster-插件"}},[s._v("#")]),s._v(" 5，部署 heapster 插件")]),s._v(" "),a("h3",{attrs:{id:"_1-下载安装文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载安装文件"}},[s._v("#")]),s._v(" 1，下载安装文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://github.com/kubernetes/heapster/archive/v1.5.0.tar.gz")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xzvf ./v1.5.0.tar.gz")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd ./heapster-1.5.0/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master1 heapster-1.5.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create -f deploy/kube-config/influxdb/")]),s._v("\ndeployment "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"monitoring-grafana"')]),s._v(" created\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"monitoring-grafana"')]),s._v(" created\nserviceaccount "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"heapster"')]),s._v(" created\ndeployment "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"heapster"')]),s._v(" created\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"heapster"')]),s._v(" created\ndeployment "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"monitoring-influxdb"')]),s._v(" created\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"monitoring-influxdb"')]),s._v(" created\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master1 heapster-1.5.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  kubectl create -f deploy/kube-config/rbac/heapster-rbac.yaml")]),s._v("\nclusterrolebinding "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"heapster"')]),s._v(" created\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"_2-部署失败。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署失败。"}},[s._v("#")]),s._v(" 2，部署失败。")]),s._v(" "),a("p",[s._v("但是这个地方在部署的时候失败了，我们可以通过命令行来查看 pod 的状态。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kubectl")]),s._v(" get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\nNAME                                    READY     STATUS             RESTARTS   AGE       IP             NODE\nheapster-55c5d9c56b-wh88h               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff（镜像问题）   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.2   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\nhelloworldapi-6ff9f5b6db-hstbr          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.4    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nhelloworldapi-6ff9f5b6db-qtg85          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.5   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\nkube-dns-778977457c-2rwdj               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/3       ErrImagePull       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.2    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nkubernetes-dashboard-8665cd4dfb-jzxg6   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.4   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\nmonitoring-grafana-5bccc9f786-2tqsn     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.3    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nmonitoring-influxdb-85cb4985d4-q8dp6    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.3   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("同时失败的信息也可以在 k8s 的 web 界面看到：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/981ab36e7f6f74e8.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("可以看到报的问题是拉取镜像失败，哈哈哈，被墙了。")]),s._v(" "),a("p",[s._v("此时可以先在一个能够访问的主机上将镜像下载下来，然后再进行加载。")]),s._v(" "),a("h3",{attrs:{id:"_3-下载镜像。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-下载镜像。"}},[s._v("#")]),s._v(" 3，下载镜像。")]),s._v(" "),a("p",[s._v("配置代理请走如下方向：http://doc.eryajf.net/docs/test/test-1am8o26r6csm9")]),s._v(" "),a("p",[s._v("然后在对应主机上下载对应镜像：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" pull gcr.io/google_containers/heapster-amd64:v1.4.2\n\nTrying to pull repository gcr.io/google_containers/heapster-amd64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nv1.4.2: Pulling from gcr.io/google_containers/heapster-amd64\n4e4eeec2f874: Pull complete\n5c479041def4: Pull complete\nDigest: sha256:f58ded16b56884eeb73b1ba256bcc489714570bacdeca43d4ba3b91ef9897b20\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" gcr.io/google_containers/heapster-amd64:v1.4.2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_4-保存镜像。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-保存镜像。"}},[s._v("#")]),s._v(" 4，保存镜像。")]),s._v(" "),a("p",[s._v("下载之后保存镜像。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("查看镜像\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" images\n\nREPOSITORY                                TAG                 IMAGE ID            CREATED             SIZE\ngcr.io/google_containers/heapster-amd64   v1.4.2              d4e02f5922ca        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" months ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("73.4")]),s._v(" MB\n\n保存镜像\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" save gcr.io/google_containers/heapster-amd64 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" heapster-amd64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_5-加载镜像。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-加载镜像。"}},[s._v("#")]),s._v(" 5，加载镜像。")]),s._v(" "),a("p",[s._v("然后把镜像传到 k8s 的 master 上，进行加载。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("传输\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$scp")]),s._v(" heapster-amd64 root@192.168.106.3:/mnt/\n\n加载\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master mnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cat")]),s._v(" heapster-amd64 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@node01 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker load'")]),s._v("\nLoaded image: gcr.io/google_containers/heapster-amd64:v1.4.2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("接着去对应的 node 主机上看看镜像：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" images\nREPOSITORY                                                                 TAG                 IMAGE ID            CREATED             SIZE\nregistry.docker-cn.com/kubernetesdashboarddev/kubernetes-dashboard-amd64   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v("                cf8ed7dd44bb        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" days ago          122MB\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.3:5000/centos                                                  v0323               5182e96772bf        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" weeks ago         200MB\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.3:5000/helloworldapi                                           v2.2                85378ce05520        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago        329MB\nregistry.access.redhat.com/rhel7/pod-infrastructure                        latest              99965fb98423        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago       209MB\ngcr.io/google_containers/heapster-amd64                                    v1.4.2              d4e02f5922ca        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" months ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("73")]),s._v(".4MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_6-验证效果。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-验证效果。"}},[s._v("#")]),s._v(" 6，验证效果。")]),s._v(" "),a("p",[s._v("当镜像正常加载之后，k8s 的 kube-controller-manage 会自动 restart 容器的。")]),s._v(" "),a("p",[s._v("先在主机上看：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master mnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kubectl")]),s._v(" get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\nNAME                                    READY     STATUS             RESTARTS   AGE       IP             NODE\nheapster-55c5d9c56b-wh88h               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running（跑起来了）            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.2   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\nhelloworldapi-6ff9f5b6db-hstbr          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          5h        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.4    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nhelloworldapi-6ff9f5b6db-qtg85          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          5h        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.5   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\nkube-dns-778977457c-2rwdj               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/3       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.2    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nkubernetes-dashboard-8665cd4dfb-jzxg6   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.4   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\nmonitoring-grafana-5bccc9f786-2tqsn     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.3    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5\nmonitoring-influxdb-85cb4985d4-q8dp6    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ImagePullBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".101.3   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("然后去 web 界面看看：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/0a7b3caefc88b24d.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("再等一会儿，给他一个加载搜集的时间，即可看到监控了。")]),s._v(" "),a("p",[s._v("一会儿过去了，，，")]),s._v(" "),a("p",[a("code",[s._v("查看总览：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/bab9771f470bfa11.jpg",alt:"image"}})]),s._v(" "),a("p",[a("code",[s._v("查看节点：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/01161d6f6c92e2d5.jpg",alt:"image"}})]),s._v(" "),a("p",[a("code",[s._v("节点详情：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/63ff3af3f53f510e.jpg",alt:"image"}})]),s._v(" "),a("h2",{attrs:{id:"_6-另外几个插件。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-另外几个插件。"}},[s._v("#")]),s._v(" 6，另外几个插件。")]),s._v(" "),a("p",[s._v("当我查看创建的 pod 的时候，发现除了 dashboard 成了之后，其余的都失败了，那么接下来，就如上边方法炮制，下载对应镜像，对之进行整理。")]),s._v(" "),a("p",[s._v("这里为了快速下载镜像，可以选择将 google 的镜像换成阿里云的。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("gcr.io/google_containers/kubernetes-dashboard-amd64:v1.8.1\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull registry.docker-cn.com/kubernetesdashboarddev/kubernetes-dashboard-amd64:head\n\n\ngcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.5\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull registry.cn-hangzhou.aliyuncs.com/wonders/k8s-dns-kube-dns-amd64:1.14.5\n\n\ngcr.io/google_containers/heapster-grafana-amd64:v4.4.3\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull registry.cn-hangzhou.aliyuncs.com/inspur_research/heapster-grafana-amd64:v4.4.3\n\n\ngcr.io/google_containers/heapster-amd64:v1.4.2\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull registry.cn-hangzhou.aliyuncs.com/inspur_research/heapster-amd64:v1.4.2\n\n\ngcr.io/google_containers/heapster-influxdb-amd64:v1.3.3\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull registry.cn-hangzhou.aliyuncs.com/inspur_research/heapster-influxdb-amd64:v1.3.3\n\n\ngcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.5\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull registry.cn-hangzhou.aliyuncs.com/inspur_research/k8s-dns-dnsmasq-nanny-amd64:1.14.5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("网友贡献：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("hub.c.163.com/zhijiansd/k8s-dns-kube-dns-amd64:1.14.5\n\nhub.c.163.com/zhijiansd/k8s-dns-dnsmasq-nanny-amd64:1.14.5\n\nhub.c.163.com/zhijiansd/k8s-dns-sidecar-amd64:1.14.5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("或者使用阿里的镜像源：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("https://dev.aliyun.com/search.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("下载之后，如法炮制，可以看到：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/848d13a627d29160.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("但是新的问题来了，因为这个地方使用阿里云的仓库地址 pull 的镜像，最后发现部署仍旧是失败的。")]),s._v(" "),a("p",[s._v("ok，接着再来问题解决大法。")]),s._v(" "),a("p",[s._v("去服务器看看 pod 情况。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master mnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kubectl")]),s._v(" get pods\nNo resources found.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("什么鬼，怎么会没数据呢。这个地方已经不能这么看了，因为部署的 pod 都是在创建的 namespace 之中的，所以以后要指定 namespace 才能查询啦。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master mnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kubectl")]),s._v(" get pods "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system\nNAME                                    READY     STATUS             RESTARTS   AGE\nheapster-55c5d9c56b-wh88h               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d\nhelloworldapi-6ff9f5b6db-hstbr          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1       ErrImagePull       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6h\nhelloworldapi-6ff9f5b6db-qtg85          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6h\nkube-dns-778977457c-2rwdj               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/3       CrashLoopBackOff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("          1d\nkubernetes-dashboard-8665cd4dfb-jzxg6   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          1d\nmonitoring-grafana-5bccc9f786-2tqsn     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d\nmonitoring-influxdb-85cb4985d4-q8dp6    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("看看详细日志：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master mnt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kubectl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system describe pods kube-dns-778977457c-2rwdj\nName:           kube-dns-778977457c-2rwdj\nNamespace:      kube-system\nNode:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5/192.168.106.5\nStart Time:     Sat, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" Sep "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":44:34 +0800\nLabels:         k8s-app"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kube-dns\n                pod-template-hash"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3345330137")]),s._v("\nAnnotations:    kubernetes.io/created-by"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SerializedReference"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apiVersion"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reference"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReplicaSet"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"namespace"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube-system"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube-dns-778977457c"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fa63df41-c399-11e8-823b-525400c7...\n                scheduler.alpha.kubernetes.io/critical-pod=\nStatus:         Pending\nIP:             172.30.24.2\nCreated By:     ReplicaSet/kube-dns-778977457c\nControlled By:  ReplicaSet/kube-dns-778977457c\nContainers:\n  kubedns:\n    Container ID:\n    Image:         gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.5\n    Image ID:\n    Ports:         10053/UDP, 10053/TCP, 10055/TCP\n    Args:\n      --domain=cluster.local.\n      --dns-port=10053\n      --config-dir=/kube-dns-config\n      --v=2\n    State:          Waiting\n      Reason:       ImagePullBackOff\n    Ready:          False\n    Restart Count:  0\n    Limits:\n      memory:  170Mi\n    Requests:\n      cpu:      100m\n      memory:   70Mi\n    Liveness:   http-get http://:10054/healthcheck/kubedns delay=60s timeout=5s period=10s #success=1 #failure=5\n    Readiness:  http-get http://:8081/readiness delay=3s timeout=5s period=10s #success=1 #failure=3\n    Environment:\n      PROMETHEUS_PORT:  10055\n    Mounts:\n      /kube-dns-config from kube-dns-config (rw)\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-dns-token-vsmtl (ro)\n  dnsmasq:\n    Container ID:  docker://61e6ea7f3c478c0d925b221ca31b803ffeb023c1a5bc8a391fe490f63bffa971\n    Image:         gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.5\n    Image ID:      docker://sha256:96c7a868215290b21a9600a46ca2f80a7ceaa49ec6811ca2be7da6fcd8aaac77\n    Ports:         53/UDP, 53/TCP\n    Args:\n      -v=2\n      -logtostderr\n      -configDir=/etc/k8s/dns/dnsmasq-nanny\n      -restartDnsmasq=true\n      --\n      -k\n      --cache-size=1000\n      --log-facility=-\n      --server=/cluster.local/127.0.0.1#10053\n      --server=/in-addr.arpa/127.0.0.1#10053\n      --server=/ip6.arpa/127.0.0.1#10053\n    State:          Waiting\n      Reason:       CrashLoopBackOff\n    Last State:     Terminated\n      Reason:       Error\n      Exit Code:    137\n      Started:      Sun, 30 Sep 2018 15:49:59 +0800\n      Finished:     Sun, 30 Sep 2018 15:51:59 +0800\n    Ready:          False\n    Restart Count:  6\n    Requests:\n      cpu:        150m\n      memory:     20Mi\n    Liveness:     http-get http://:10054/healthcheck/dnsmasq delay=60s timeout=5s period=10s #success=1 #failure=5\n    Environment:  <none>\n    Mounts:\n      /etc/k8s/dns/dnsmasq-nanny from kube-dns-config (rw)\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-dns-token-vsmtl (ro)\n  sidecar:\n    Container ID:\n    Image:         gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.5\n    Image ID:\n    Port:          10054/TCP\n    Args:\n      --v=2\n      --logtostderr\n      --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local,5,A\n      --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local,5,A\n    State:          Waiting\n      Reason:       ErrImagePull\n    Ready:          False\n    Restart Count:  0\n    Requests:\n      cpu:        10m\n      memory:     20Mi\n    Liveness:     http-get http://:10054/metrics delay=60s timeout=5s period=10s #success=1 #failure=5\n    Environment:  <none>\n    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-dns-token-vsmtl (ro)\nConditions:\n  Type           Status\n  Initialized    True\n  Ready          False\n  PodScheduled   True\nVolumes:\n  kube-dns-config:\n    Type:      ConfigMap (a volume populated by a ConfigMap)\n    Name:      kube-dns\n    Optional:  true\n  kube-dns-token-vsmtl:\n    Type:        Secret (a volume populated by a Secret)\n    SecretName:  kube-dns-token-vsmtl\n    Optional:    false\nQoS Class:       Burstable\nNode-Selectors:  <none>\nTolerations:     CriticalAddonsOnly\nEvents:\n  Type     Reason      Age                  From                    Message\n  ----     ------      ----                 ----                    -------\n  Warning  FailedSync  38m (x6369 over 1d)  kubelet, 192.168.106.5  Error syncing pod\n  Warning  Failed      33m (x313 over 1d)   kubelet, 192.168.106.5  Failed to pull image "')]),s._v("gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.5"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": rpc error: code = Unknown desc = Error response from daemon: Get https://gcr.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n  Warning  Failed      28m (x314 over 1d)   kubelet, 192.168.106.5  Failed to pull image "')]),s._v("gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.5"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": rpc error: code = Unknown desc = Errorresponse from daemon: Get https://gcr.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n  Normal   BackOff     18m (x6135 over 1d)  kubelet, 192.168.106.5  Back-off pulling image "')]),s._v('gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.5"\n  Warning  Unhealthy   8m '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x14 over 14m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5  Liveness probe failed: Get http://172.30.24.2:10054/healthcheck/dnsmasq: dial tcp "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.30")]),s._v(".24.2:10054: getsockopt: connection refused\n  Normal   Killing     3m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x6 over 13m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.5  Killing container with "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" docker://dnsmasq:Container failed liveness probe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" Container will be killed and recreated.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br")])]),a("p",[s._v("看最后的信息，大概说的是依然找不到对应的镜像，我们去 192.168.106.5 这台主机上看看是否有这个镜像。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node02 log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" images\nREPOSITORY                                                                      TAG                 IMAGE ID            CREATED             SIZE\ngcr.io/google_containers/heapster-grafana-amd64                                 v4.4.3              edd7018a59de        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        152MB\nregistry.cn-hangzhou.aliyuncs.com/inspur_research/heapster-grafana-amd64        v4.4.3              edd7018a59de        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        152MB\ngcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64                            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".5              96c7a8682152        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(".4MB\nregistry.cn-hangzhou.aliyuncs.com/inspur_research/k8s-dns-dnsmasq-nanny-amd64   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".5              96c7a8682152        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(".4MB\nregistry.cn-hangzhou.aliyuncs.com/wonders/k8s-dns-kube-dns-amd64                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".5              38844359ff14        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v(".4MB\nregistry.access.redhat.com/rhel7/pod-infrastructure                             latest              99965fb98423        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago       209MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("话说第五个不就是么，但是注意，这个地方因为用阿里云仓库下载，所以 tag 名称与人家报出来的不一致，因此导致失败。解决办法就是修改对应的 tag。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("注意修改的时候带上后边的版本号。\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node02 log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" tag registry.cn-hangzhou.aliyuncs.com/wonders/k8s-dns-kube-dns-amd64:1.14.5 gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.5\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node02 log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node02 log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" images\nREPOSITORY                                                                      TAG                 IMAGE ID            CREATED             SIZE\ngcr.io/google_containers/heapster-grafana-amd64                                 v4.4.3              edd7018a59de        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        152MB\nregistry.cn-hangzhou.aliyuncs.com/inspur_research/heapster-grafana-amd64        v4.4.3              edd7018a59de        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        152MB\nregistry.cn-hangzhou.aliyuncs.com/inspur_research/k8s-dns-dnsmasq-nanny-amd64   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".5              96c7a8682152        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(".4MB\ngcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64                            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".5              38844359ff14        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v(".4MB\nregistry.cn-hangzhou.aliyuncs.com/wonders/k8s-dns-kube-dns-amd64                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".5              38844359ff14        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v(".4MB\nregistry.access.redhat.com/rhel7/pod-infrastructure                             latest              99965fb98423        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago       209MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("改完之后就可以去 master 看看 pod 的状态了。")]),s._v(" "),a("p",[s._v("这个时候的日志，也可以通过 node 节点的 / var/log/messages 进行监控。")]),s._v(" "),a("p",[s._v("那么到此刻，一个所谓的安装流程算是到此完毕。事实上这只是一小小小步而已，经过了这遍安装也只是熟悉了 k8s 所需要的组件有哪些，至于其中各个组件分别代表什么，又分别有什么功能，之间的协作是怎样的，k8s 的实际应用又是那些，这都是需要深入的地方。")])])}),[],!1,null,null,null);a.default=e.exports}}]);