(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{551:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-配置管理端。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置管理端。"}},[s._v("#")]),s._v(" 1，配置管理端。")]),s._v(" "),a("ul",[a("li",[s._v("安装 apache 和 php 环境")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" php php-pear php-mbstring ntpdate httpd php-ldap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#php-ldap是让php程序连接ldap的组件")]),s._v("\nsystemctl start httpd\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("调整 apache 和 php 的配置文件，修改 apache 的默认首页类型，将 index.php 加入其中")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/httpd/conf/httpd.conf +164\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("IfModule dir_module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    DirectoryIndex  index.php\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/IfModule"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("重启 apache")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl restart httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("修改 php.ini 的时区")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/php.ini\ndate.timezone "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Asia/Shanghai"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("配置 phpldapadmin")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nchc.dl.sourceforge.net/project/phpldapadmin/phpldapadmin-php5/1.2.3/phpldapadmin-1.2.3.tgz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf phpldapadmin-1.2.3.tgz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" phpldapadmin-1.2.3 /var/www/html/phpldapadmin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /var/www/html/phpldapadmin/config/config.php.example /var/www/html/phpldapadmin/config/config.php.example.bak\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /var/www/html/phpldapadmin/config/config.php.example /var/www/html/phpldapadmin/config/config.php\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("修改配置文件，填写端口，地址和 RootDN")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /var/www/html/phpldapadmin/config/config.php\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$servers")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("setValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'server'")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'host'")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$servers")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("setValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'server'")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'port'")]),s._v(",389"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$servers")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("setValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'server'")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'base'")]),s._v(",array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dc=eryajf,dc=net'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("去浏览器验证登录")]),s._v(" "),a("p",[s._v("http://10.3.0.42/phpldapadmin")]),s._v(" "),a("p",[s._v("登录名为 DN：cn=admin,dc=eryajf,dc=net\n密码为第二次设置的密码：eryajf@456")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/bbeb4d8cb102cc74.jpg",alt:"image-20191103202211417"}})]),s._v(" "),a("h2",{attrs:{id:"_2-思路简单梳理。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-思路简单梳理。"}},[s._v("#")]),s._v(" 2，思路简单梳理。")]),s._v(" "),a("p",[s._v("关于用户管理方面，这里简单梳理一下思路，现在看到如上图所示，在总域名之下，分了几个组别，其中 cn 是管理者，再往下建了两个真正存放用户的小组（当然，真实的概念可能从组织的角度去看），这里怎么看不要紧，重要的是，能用自己的思路理解了，然后运用起来就好了。")]),s._v(" "),a("p",[s._v("现在的思路是，所有用户，全部都在 People 这个组内，新来员工创建账号，也都分配在这里，针对一些全员性质的授权，比如全员共用的文档系统等，可以直接对这一组进行授权，也就相当于对全员进行了授权。另外的 Group 则可以真正作为组进行二次细分，某些重要应用，或者部分性比较强的应用，都可以通过在这个下边创建一个小组进行区分，从而授权的时候更加便捷。")]),s._v(" "),a("p",[s._v("以上两种授权方案在后边的实战配置当中都会给出演示，先按着刚刚的思路创建一些测试用户，到后边一配好，一切就都明白了。")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("创建普通用户：")]),s._v(" "),a("ul",[a("li",[s._v("在 People 之下点击创建新条目")]),s._v(" "),a("li",[s._v("模板选择默认")]),s._v(" "),a("li",[a("strong",[s._v("ObjectClasses")]),s._v("选择"),a("strong",[s._v("inetOrgPerson")]),s._v("，然后点击继续")]),s._v(" "),a("li",[s._v("从上而下填写，RDN 选择 "),a("code",[s._v("User Name(uid)")])]),s._v(" "),a("li",[s._v("然后开始正式的人员信息填写\n"),a("ul",[a("li",[s._v("cn：zhangs")]),s._v(" "),a("li",[s._v("sn：zhangs")]),s._v(" "),a("li",[s._v("displayName：张三")]),s._v(" "),a("li",[s._v("电子邮件：zhangs@qq.com")]),s._v(" "),a("li",[s._v("ou：People")]),s._v(" "),a("li",[s._v("密码：123456")]),s._v(" "),a("li",[s._v("User Name：zhangs")])])])]),s._v(" "),a("p",[s._v("然后点击创建，提交之后，一个普通用户就创建成功了。一般情况下，应用直接通过这一曾来管理用户即可。")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("但是有些情况下，再另外拉出来一个分组，从软件的角度来分组，会更好一些。")]),s._v(" "),a("p",[s._v("创建一个应用组：")]),s._v(" "),a("ul",[a("li",[s._v("在 Group 之下创建新条目")]),s._v(" "),a("li",[s._v("模板选择默认")]),s._v(" "),a("li",[a("strong",[s._v("ObjectClasses")]),s._v("选择"),a("strong",[s._v("groupOfNames")]),s._v("，然后点击继续")]),s._v(" "),a("li",[s._v("从上而下填写，RDN 选择 "),a("code",[s._v("cn(cn)")])]),s._v(" "),a("li",[s._v("然后开始填写组信息\n"),a("ul",[a("li",[s._v("cn：jenkins")]),s._v(" "),a("li",[s._v("member：点击后边的搜索框，选择将要包含的用户")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("然后点击创建，提交之后，就创建了一个 jenkins 组，配置 ldap 的时候，可以基于这个组来进行管理。")]),s._v(" "),a("h2",{attrs:{id:"_3-配置自助修改密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置自助修改密码"}},[s._v("#")]),s._v(" 3，配置自助修改密码")]),s._v(" "),a("p",[s._v("一般情况下，我们给先入职同学创建账户的时候，都会设置一个统一的账号，然后再由该同学自助修改密码，那么，就需要部署一个自助修改密码的服务，这里采用 docker 方式部署，简单便捷。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" docker-compose.yml\nversion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v("\nservices:\n  ssp-app:\n    image: registry.cn-hangzhou.aliyuncs.com/eryajf/self-service-password\n    container_name: ssp-app\n    volumes:\n      - ./data/:/www/ssp\n      - ./logs/:/www/logs\n    ports:\n      - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v(":80\n    environment:\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VIRTUAL_HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.3.0.42\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VIRTUAL_NETWORK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx-proxy\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LETSENCRYPT_HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.3")]),s._v(".0.42\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LETSENCRYPT_EMAIL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Linuxlql@163.com\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_SERVER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ldap://10.3.0.42:389\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_STARTTLS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_BINDDN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_BINDPASS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf@456\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_BASE_SEARCH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ou"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("People,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eryajf,dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("net\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_LOGIN_ATTRIBUTE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uid\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_FULLNAME_ATTRIBUTE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cn\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Active Directory mode")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# true: use unicodePwd as password field")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# false: LDAPv3 standard behavior")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ADMODE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Force account unlock when password is changed")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AD_OPT_FORCE_UNLOCK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Force user change password at next login")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AD_OPT_FORCE_PWD_CHANGE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Allow user with expired password to change password")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AD_OPT_CHANGE_EXPIRED_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Samba mode")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# true: update sambaNTpassword and sambaPwdLastSet attributes too")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# false: just update the password")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SAMBA_MODE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Shadow options - require shadowAccount objectClass")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Update shadowLastChange")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SHADOW_OPT_UPDATE_SHADOWLASTCHANGE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Hash mechanism for password:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SSHA")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SHA")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SMD5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MD5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CRYPT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# clear (the default)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# auto (will check the hash of current password)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This option is not used with ad_mode = true")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_HASH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SHA\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Local password policy")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is applied before directory password policy")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Minimal length")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_MIN_LENGTH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Maximal length")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_MAX_LENGTH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Minimal lower characters")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_MIN_LOWERCASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Minimal upper characters")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_MIN_UPPERCASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Minimal digit characters")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_MIN_DIGIT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Minimal special characters")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_MIN_SPECIAL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Dont reuse the same password as currently")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_NO_REUSE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Show policy constraints message:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# always")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# never")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# onerror")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_SHOW_POLICY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("never\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Position of password policy constraints message:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# above - the form")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# below - the form")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD_SHOW_POLICY_POSITION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("above\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Who changes the password?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Also applicable for question/answer save")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# user: the user itself")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# manager: the above binddn")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WHO_CAN_CHANGE_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("user\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Questions/answers")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use questions/answers?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# true (default)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# false")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("QUESTIONS_ENABLED")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Mail")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# LDAP mail attribute")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LDAP_MAIL_ATTRIBUTE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mail\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Who the email should come from")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAIL_FROM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Linuxlql@163.com\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAIL_FROM_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Password Reset\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Notify users anytime their password is changed")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NOTIFY_ON_CHANGE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PHPMailer configuration (see https://github.com/PHPMailer/PHPMailer)")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_DEBUG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("smtp.163.com\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_AUTH_ON")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_USER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Linuxlql@163.com\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_PASS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是邮箱的授权码，经常配置邮箱的你，一定明白我的意思")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_SECURE_TYPE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tls\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SMTP_AUTOTLS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## SMS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use sms (NOT WORKING YET)")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USE_SMS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Reset URL (if behind a reverse proxy)")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IS_BEHIND_PROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Display help messages")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SHOW_HELP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Language")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Debug mode")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEBUG_MODE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Encryption, decryption keyphrase")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SECRETEKEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("secretkey\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## CAPTCHA")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use Google reCAPTCHA (http://www.google.com/recaptcha)")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USE_RECAPTCHA")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Go on the site to get public and private key")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RECAPTCHA_PUB_KEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("akjsdnkajnd\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RECAPTCHA_PRIV_KEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("aksdjnakjdnsa\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Default action")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# change")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sendtoken")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sendsms")]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEFAULT_ACTION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("change\n    networks:\n      - proxy-tier\n    restart: always\nnetworks:\n  proxy-tier:\n    external:\n      name: nginx-proxy\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br")])]),a("p",[s._v("然后直接运行服务即可。访问对应端口可以看到更改密码的页面：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/36a7151eb2a6b9ef.jpg",alt:"image-20191025225415259"}})]),s._v(" "),a("p",[s._v("如果知道原来密码，直接在自助密码服务处更改即可，如果忘记原来密码，可以通过邮件方式进行更改。")])])}),[],!1,null,null,null);a.default=e.exports}}]);