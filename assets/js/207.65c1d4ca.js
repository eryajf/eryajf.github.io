(window.webpackJsonp=window.webpackJsonp||[]).push([[207],{550:function(a,s,t){"use strict";t.r(s);var e=t(0),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("这应该是第二次发力准备深入研究一下 ldap 这个东东，以往的工作生活中，也曾着手研究过，当时照着网上的文档也算是部署了出来，接着进入实际配置的时候，立刻就被其中各个名词给迷惑，瞬间坠入五里雾，晕晕乎乎不得其法。")]),a._v(" "),s("p",[a._v("这次幸得一些工作中实际场景的借鉴，以及博客读者杨哥的倾情分享，让我彻底来了激情，一股脑研究下去，无论艰辛，哪管黑夜白天，现在，不敢说自己已经精通，但是日常运维使用，基本上是足够了，特别来进行分享，希望通过几篇文章，能够深入浅出地把这个好用且大大提高效率的工具给讲明白。")]),a._v(" "),s("p",[a._v("我想，之前之所以不能够拿下他，还是方法不够得当，在还没有熟悉软件的时候，就被网上许多介绍概念的文章给绕晕，因此，这次的文章，则先把各种概念抛到一边，尽管照着文档做下去，只把文档做上两三遍，则所谓的七七八八的概念，也就自然了解了。")]),a._v(" "),s("p",[a._v("那么，废话不多说，直接来进入部署工作。")]),a._v(" "),s("h2",{attrs:{id:"_1-准备工作。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备工作。"}},[a._v("#")]),a._v(" 1，准备工作。")]),a._v(" "),s("p",[a._v("准备一台环境干净的"),s("code",[a._v("CentOS-7.4")]),a._v("主机，主机 IP 为"),s("code",[a._v("10.3.0.42")]),a._v("。")]),a._v(" "),s("p",[a._v("关闭防火墙，selinux 这些就不细说了。")]),a._v(" "),s("p",[a._v("我个人的域名为 eryajf.net，我给 ldap 服务配置一个域名为"),s("code",[a._v("ldap.eryajf.net")]),a._v("。各位跟随文章做的同学，暂时可以先与我保持一致，以免出现不可预知的错误。")]),a._v(" "),s("p",[a._v("时间同步。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ntpdate "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" ntpdate "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" cn.pool.ntp.org\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("将域名解析写入到 hosts。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10.3.0.42    ldap.eryajf.net"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/hosts\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"_2-安装。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装。"}},[a._v("#")]),a._v(" 2，安装。")]),a._v(" "),s("ul",[s("li",[a._v("yum 安装 openldap，并采用"),s("code",[a._v("cn=config")]),a._v("方式（修改配置会立即生效，不用重启 slapd）")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" openldap openldap-clients openldap-devel openldap-servers compat-openldap migrationtools\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("准备 BDB 数据库文件")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" ldap:ldap /var/lib/ldap/DB_CONFIG\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ul",[s("li",[a._v("启动并加入开机自启动")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("systemctl start slapd\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" slapd\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"_3-基础配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-基础配置"}},[a._v("#")]),a._v(" 3，基础配置")]),a._v(" "),s("ul",[s("li",[a._v("生成 openldap 的管理密码"),s("code",[a._v("eryajf@123")]),a._v("（记下来，下面将用到）")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@openldap-server ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# slappasswd")]),a._v("\nNew password:\nRe-enter new password:\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SSHA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("5KqLmqUXoiq/I3nDByp2NKDNjc4STyjW\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("ul",[s("li",[a._v("编写 ldif 文件（填入上面生成的 ssha 为 olcRootPW 密码）")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" chrootpw.ldif\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("olcDatabase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("config,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SSHA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("5KqLmqUXoiq/I3nDByp2NKDNjc4STyjW "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#填入上面生成的ssha")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("ul",[s("li",[a._v("导入 ldif 文件")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@openldap-server ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ldapadd -Y EXTERNAL -H ldapi:/// -f chrootpw.ldif")]),a._v("\nSASL/EXTERNAL authentication started\nSASL username: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("gidNumber")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("+uidNumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(",cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("peercred,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("external,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("auth\nSASL SSF: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nmodifying entry "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"olcDatabase={0}config,cn=config"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("ul",[s("li",[a._v("导入基础的 Schemas （openldap 的基础模块在/etc/openldap/schema/目录里面）")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("ldapadd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Y")]),a._v(" EXTERNAL "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" ldapi:/// "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" /etc/openldap/schema/cosine.ldif\nldapadd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Y")]),a._v(" EXTERNAL "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" ldapi:/// "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" /etc/openldap/schema/nis.ldif\nldapadd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Y")]),a._v(" EXTERNAL "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" ldapi:/// "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" /etc/openldap/schema/inetorgperson.ldif\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"_4-配置-openldap-的条目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置-openldap-的条目"}},[a._v("#")]),a._v(" 4，配置 openldap 的条目")]),a._v(" "),s("ul",[s("li",[a._v("先准备一个 openldap 根 DN 的管理密码("),s("code",[a._v("eryajf@456")]),a._v(")，然后设置你的 RootDN 名字在 openldap 的数据库中")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@openldap-server ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# slappasswd")]),a._v("\nNew password:\nRe-enter new password:\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SSHA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("sA4tp2fDiU/DVMfYTc65ugQDqaNyt3ai\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("ul",[s("li",[a._v("编写 RootDN 的 ldif 文件（cn=admin,dc=eryajf,dc=net）")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" chdomain.ldif\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# replace to your own domain name for "dc=***,dc=***" section')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# specify the password generated above for "olcRootPW" section')]),a._v("\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("olcDatabase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("monitor,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("config\nchangetype: modify\nreplace: olcAccess\nolcAccess: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("to * by "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dn.base")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("read")]),a._v(" by "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dn.base")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cn=admin,dc=eryajf,dc=net"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("read")]),a._v(" by * none\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("olcDatabase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("hdb,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("config\nchangetype: modify\nreplace: olcSuffix\nolcSuffix: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("olcDatabase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("hdb,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("olcDatabase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("hdb,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SSHA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("sA4tp2fDiU/DVMfYTc65ugQDqaNyt3ai\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("olcDatabase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("hdb,cn"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("config\nchangetype: modify\nadd: olcAccess\nolcAccess: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("to "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("attrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("userPassword,shadowLastChange by\n  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cn=admin,dc=eryajf,dc=net"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("write")]),a._v(" by anonymous auth by self "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("write")]),a._v(" by * none\nolcAccess: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("to "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dn.base")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v(" by * "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("read")]),a._v("\nolcAccess: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("to * by "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cn=admin,dc=eryajf,dc=net"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("write")]),a._v(" by * "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("read")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br")])]),s("ul",[s("li",[a._v("导入定义 RootDN 的 ldif 文件")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("ldapmodify "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Y")]),a._v(" EXTERNAL "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" ldapi:/// "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" chdomain.ldif\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("编写基础的 domain 条目的 ldif")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" basedomain.ldif\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# replace to your own domain name for "dc=***,dc=***" section')]),a._v("\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\nobjectClass: "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v("\nobjectClass: dcObject\nobjectclass: organization\no: eryajf net\ndc: eryajf\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\nobjectClass: organizationalRole\ncn: admin\ndescription: Directory admin\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ou")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("People,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\nobjectClass: organizationalUnit\nou: People\ndn: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ou")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Group,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\nobjectClass: organizationalUnit\nou: Group\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br")])]),s("ul",[s("li",[a._v("导入基础的 domain 条目文件")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("ldapadd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf,dc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-W")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" basedomain.ldif    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#这里会要求输入openldap数据库的密码，也就是设置的第二个密码")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"_5-验证是否正常启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-验证是否正常启动"}},[a._v("#")]),a._v(" 5，验证是否正常启动")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#验证查看slapd服务是否启动，并监听389端口")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" slapd\nss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tnl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("389")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看服务器openldap目录树信息")]),a._v("\nldapsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"dc=eryajf,dc=net"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" ldap://127.0.0.1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("到这里，服务端就部署好了，整个过程不算复杂，只需要细心做好配置即可。")]),a._v(" "),s("p",[s("a",{attrs:{href:"http://t.eryajf.net/imgs/2021/09/98c771d4c82bbdbd.jpg",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/98c771d4c82bbdbd.jpg",alt:"img"}}),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"_6-一键部署脚本。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-一键部署脚本。"}},[a._v("#")]),a._v(" 6，一键部署脚本。")]),a._v(" "),s("p",[a._v("在 GitHub 上也有人配好的 docker 方案，所以事实上也可以通过 docker 来进行部署。docker 部署非常简单，首先在干净的主机上安装 docker 环境，然后运行如下脚本。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash -e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SERVICE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ldap-service\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HOST_NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ldap-server\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDAP_DOMAIN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf.net\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDAP_DC")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eryajf\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDAP_DC_ORG")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("net\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NETWORK_ADAPTER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("eth0\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("123465")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("OPENLDAP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.2.0"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PHPLDAPADMIN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.7.1"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HTTPS_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("OPENLDAP_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("389")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${OPENLDAP_PORT}")]),a._v(":389 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${SERVICE}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HOST_NAME}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDAP_ORGANISATION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"WPT-Group"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDAP_DOMAIN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DOMAIN}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDAP_ADMIN_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PASSWORD}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--detach")]),a._v(" osixia/openldap:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${OPENLDAP}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HTTPS_PORT}")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${SERVICE}")]),a._v("-admin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HOST_NAME}")]),a._v("-admin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--link")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${SERVICE}")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HOST_NAME}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PHPLDAPADMIN_LDAP_HOSTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HOST_NAME}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PHPLDAPADMIN_HTTPS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--detach")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    osixia/phpldapadmin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PHPLDAPADMIN}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-----------------------------------"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PHPLDAP_IP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"{{ .NetworkSettings.IPAddress }}"')]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SERVICE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${SERVICE}")]),a._v(" ldapsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" ldap://"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PHPLDAP_IP}")]),a._v(":389 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"dc='),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DC}")]),a._v(",dc="),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DC_ORG}")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cn=admin,dc='),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DC}")]),a._v(",dc="),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DC_ORG}")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-w")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PASSWORD}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-----------------------------------"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PUB_IP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ifconfig")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("NETWORK_ADAPTER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"inet"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $2}'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Go to: https://'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PUB_IP}")]),a._v(":"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HTTPS_PORT}")]),a._v('"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Login DN: cn=admin,dc='),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DC}")]),a._v(",dc="),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LDAP_DC_ORG}")]),a._v('"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Password: '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PASSWORD}")]),a._v('"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br")])]),s("p",[a._v("创建完成之后，即可投入使用。")]),a._v(" "),s("p",[a._v("本文介绍了服务端的部署流程，日常我们管理的时候，可以通过这种命令行的方式进行管理，不过事实上大多时候，大家更习惯于在 ldap 对应的 web 管理端进行配置，所以下一篇文章将介绍 web 管理端的部署配置，并介绍如何开放出一种用户自助更改密码的方案。")])])}),[],!1,null,null,null);s.default=n.exports}}]);