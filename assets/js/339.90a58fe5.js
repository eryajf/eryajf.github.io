(window.webpackJsonp=window.webpackJsonp||[]).push([[339],{682:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("之前自己好像在一个项目的构建当中说过这样的话，“而如果是其他的诸如前端啊，PHP 之类的项目，则就更简单了”，说出去之后好像这些项目的构建操作真的非常简单一般的，也就没有在对此进行任何表述。")]),s._v(" "),a("p",[s._v("但是有不少公司其实是纯 web 端服务的，这个时候构建前端项目则显得成为一个主要的事儿了，那么究竟该如何来构建一个完整前端项目呢？")]),s._v(" "),a("p",[s._v("今天我就借以 nodejs 项目举例，不仅仅把 node 项目完整配置流程讲清楚，更借此机会把如何利用 git 分支的办法进行项目的回滚之操作给表述一下，这次表述是一个引子，以后或许会专门写一篇关于回滚的文章吧。")]),s._v(" "),a("p",[s._v("首先说 nodejs 是一个跑起来的服务，需要一些依赖，而每个开发所定义的或者使用的命令之类的又不一样，因此在做 nodejs 的准备工作的时候就很有必要与开发者结合着来做。")]),s._v(" "),a("p",[s._v("接下来进入正题，我们先来在 Jenkins 上做一些配置，先把代码给搞到目标服务器去。")]),s._v(" "),a("p",[s._v("首先创建一个新的项目 test-node。")]),s._v(" "),a("p",[s._v("进入到项目的配置里，添加两项参数。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/5c6278a42b3c8359.jpg",alt:"image"}})]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("注意，此处定义了一个名为 mode 的变量，到时候就通过这个变量的传递来实现整个流程是部署，还是回滚，或者是纯粹的项目重启一下。")])]),s._v(" "),a("p",[s._v("字符参数定义发布代码的分支。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a723e26b70d554c6.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("源码管理依旧使用 git 的地址。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/44f7d9260ef83c9d.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("在构建这里先简单写几条命令，让新鲜的代码推到远程服务器去。注意，这里所写的并不是最终脚本哦。因此也就不贴出来了。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/f6f3470cff7c6462.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("然后执行一下构建先：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/afa02a96d4774785.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("真的是超级简陋的，刚刚开始，什么都没有呢。")]),s._v(" "),a("p",[s._v("好了，现在去远程服务器上做一下环境的准备工作。")]),s._v(" "),a("h3",{attrs:{id:"_1-安装-node。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-node。"}},[s._v("#")]),s._v(" 1，安装 node。")]),s._v(" "),a("p",[s._v("来波小小的操作。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nodejs.org/dist/v6.10.1/node-v6.10.1-linux-x64.tar.xz\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载源码包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf node-v6.10.1-linux-x64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /opt/node-v6.10.1-linux-x64 /urs/local/node\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/node/bin/* /usr/local/bin/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#做软链接让命令可用，也可以写入到/etc/profile里，如果写入配置，那么内容如下：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/node\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_HOME")]),s._v("/lib/node_modules:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#验证安装是否成功。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("然后去到刚才同步过来的目录当中。也就是 node 项目的根目录中。")]),s._v(" "),a("h3",{attrs:{id:"_2-配置-node-的一些工具。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-node-的一些工具。"}},[s._v("#")]),s._v(" 2，配置 node 的一些工具。")]),s._v(" "),a("p",[s._v("确保此时是在项目根目录下。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost h5-node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/usr/local/h5-node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后安装项目中的依赖。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost h5-node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm install --registry=https://registry.npm.taobao.org")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这一步的操作因为我也不十分明白其中意义，百度一下还真有雷同的问题：https://segmentfault.com/q/1010000012142031")]),s._v(" "),a("p",[s._v("其实上边这一步是安装好本项目所有的依赖。")]),s._v(" "),a("p",[s._v("因为我这里的项目开发者用的是 gulp 进行管理的。因此来安装一下 gulp 与 pm2（每次看到这个词儿就想到开发大哥操着小口音说“嘎破”的样子）命令。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost h5-node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm i -g gulp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost h5-node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm i -g pm2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("其中 i 是 install，-g 表示全局安装的意思。这两条命令安装都比较慢，请耐心等待。")]),s._v(" "),a("p",[s._v("成功的样子如下边：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost h5-node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# npm i  pm2 -g\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    .............."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - fetchMetadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sill mapToRegistry uri https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//registry.npmjs.org/yamljs")]),s._v("\nnpm ERR! fetch failed https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//tgz.pm2.io/gkt-1.0.0.tgz")]),s._v("\nnpm WARN retry will retry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" error on last attempt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Error"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" connect ETIMEDOUT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.172")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.189")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\nnpm ERR! fetch failed https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//tgz.pm2.io/gkt-1.0.0.tgz")]),s._v("\nnpm WARN retry will retry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" error on last attempt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Error"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" connect ETIMEDOUT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.172")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.189")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\nnpm ERR! fetch failed https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//tgz.pm2.io/gkt-1.0.0.tgz")]),s._v("\n/usr/local/node/bin/pm2 -> /usr/local/node/lib/node_modules/pm2/bin/pm2\n/usr/local/node/bin/pm2-dev -> /usr/local/node/lib/node_modules/pm2/bin/pm2-dev\n/usr/local/node/bin/pm2-docker -> /usr/local/node/lib/node_modules/pm2/bin/pm2-docker\n/usr/local/node/bin/pm2-runtime -> /usr/local/node/lib/node_modules/pm2/bin/pm2-runtime\n/usr/local/node/lib\n└─┬ pm2@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.10")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  ├─┬ async@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ └── lodash@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.17")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n  ├── blessed@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v("\n  ├─┬ chalk@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  │ ├── ansi-styles@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├── escape-string-regexp@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  │ ├─┬ has-ansi@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ └── ansi-regex@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├── strip-ansi@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ └── supports-color@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├─┬ chokidar@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  │ ├─┬ anymatch@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ └─┬ micromatch@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n  │ │   ├── arr-diff@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   ├─┬ define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   │ └─┬ is-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   │   ├── is-accessor-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │   └── is-data-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   ├─┬ extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   │ ├── assign-symbols@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │ └─┬ is-extendable@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │   │   └── is-plain-object@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ │   ├─┬ extglob@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ │   │ ├─┬ define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │ │ └─┬ is-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   │ │   ├── is-accessor-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │ │   └── is-data-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │ ├─┬ expand-brackets@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ │   │ │ ├── debug@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │ │   │ │ ├── define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  │ │   │ │ ├── extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │   │ │ └── posix-character-classes@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │   │ └── extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │   ├── fragment-cache@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │   ├── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   ├─┬ nanomatch@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │ │   │ ├─┬ is-odd@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │ │ └── is-number@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   │ └── is-windows@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   ├── object.pick@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │   └── regex-not@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ ├── async-each@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├─┬ braces@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ ├── arr-flatten@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ ├── array-unique@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ ├─┬ extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ └── is-extendable@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ ├─┬ fill-range@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ ├── extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ ├─┬ is-number@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ └─┬ kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │   └── is-buffer@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ ├── repeat-string@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ └── to-regex-range@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ ├── isobject@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ ├── repeat-element@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ ├─┬ snapdragon@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ ├─┬ base@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.11")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ ├─┬ cache-base@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │ ├─┬ collection-visit@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │ ├── map-visit@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │ └── object-visit@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │ ├── get-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ │ │ ├─┬ has-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │ └─┬ has-values@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │   └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ ├─┬ set-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │ └── extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │ ├─┬ to-object-path@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │ └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ │ ├─┬ union-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ │ └─┬ set-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  │ │ │ │ │ │   └── extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │ └─┬ unset-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │   └─┬ has-value@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │     ├── has-values@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ │ │ │ │     └── isobject@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ ├─┬ class-utils@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ │ │ ├── arr-union@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ ├── define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  │ │ │ │ │ └─┬ static-extend@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ │   ├── define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  │ │ │ │ │   └─┬ object-copy@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │     ├── copy-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │     ├── define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  │ │ │ │ │     └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ ├── component-emitter@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ ├─┬ define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │ └─┬ is-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ │   ├── is-accessor-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ │   └── is-data-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ ├─┬ mixin-deep@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ │ ├── for-in@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ │ └── is-extendable@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ └── pascalcase@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ ├── debug@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │ │ │ ├─┬ define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  │ │ │ │ └─┬ is-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ │   ├─┬ is-accessor-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ │   │ └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │   ├─┬ is-data-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ │ │ │   │ └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │   └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ ├── extend-shallow@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ ├── map-cache@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ ├── source-map@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n  │ │ │ ├─┬ source-map-resolve@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │ ├── atob@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ ├── decode-uri-component@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ ├── resolve-url@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ │ ├── source-map-url@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ └── urix@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ └── use@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ ├─┬ snapdragon-node@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ ├─┬ define-property@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │ └─┬ is-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ │   ├── is-accessor-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ │   └── is-data-descriptor@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ └─┬ snapdragon-util@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │   └── kind-of@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ ├── split-string@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ └─┬ to-regex@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │   └─┬ safe-regex@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │     └── ret@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n  │ ├─┬ glob-parent@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ ├── is-glob@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ └── path-dirname@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ ├── inherits@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  │ ├─┬ is-binary-path@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ └── binary-extensions@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ ├─┬ is-glob@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ └── is-extglob@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├─┬ normalize-path@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ └── remove-trailing-separator@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ ├── path-is-absolute@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├─┬ readdirp@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ ├── graceful-fs@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n  │ │ ├─┬ minimatch@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ │ │ └─┬ brace-expansion@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n  │ │ │   ├── balanced-match@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │   └── concat-map@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ ├─┬ readable-stream@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ ├── core-util-is@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ ├── isarray@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ ├── process-nextick-args@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ │ ├── safe-buffer@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ │ ├── string_decoder@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ │ │ └── util-deprecate@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ └── set-immediate-shim@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ └── upath@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├── cli-table-redemption@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├── commander@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.13")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├─┬ cron@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ └── moment-timezone@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("\n  ├─┬ debug@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ └── ms@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├── eventemitter2@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  ├── fclone@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n  ├─┬ mkdirp@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ └── minimist@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n  ├── moment@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.22")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├─┬ needle@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├── debug@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │ ├─┬ iconv-lite@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("\n  │ │ └── safer-buffer@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ └── sax@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  ├─┬ nssocket@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ ├── eventemitter2@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("\n  │ └── lazy@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n  ├── pidusage@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├─┬ pm2-axon@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ ├── amp@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├── amp-message@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ └── escape-regexp@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├── pm2-axon-rpc@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├─┬ pm2-deploy@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │ ├── async@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ └── tv4@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├─┬ pm2-multimeter@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ └── charm@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  ├─┬ pmx@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  │ ├── deep-metrics@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ ├── json-stringify-safe@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │ └─┬ vxx@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │   ├─┬ continuation-local-storage@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │   │ ├── async-listener@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │   │ └── emitter-listener@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │   ├── debug@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n  │   ├── extend@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │   ├── is@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │   ├── lodash.findindex@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │   ├── lodash.isequal@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │   ├── lodash.merge@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │   ├── methods@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │   ├── shimmer@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │   └── uuid@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├─┬ promptly@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ └─┬ read@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n  │   └── mute-stream@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n  ├── semver@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  ├─┬ shelljs@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n  │ ├─┬ glob@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ ├── fs.realpath@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ │ ├─┬ inflight@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ │ │ └── wrappy@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │ │ └── once@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ ├── interpret@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ └─┬ rechoir@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  │   └─┬ resolve@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  │     └── path-parse@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  ├─┬ source-map-support@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n  │ ├── buffer-from@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  │ └── source-map@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├── sprintf-js@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ├── v8-compile-cache@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  ├─┬ vizion@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("\n  │ └── async@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  └─┬ yamljs@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    └─┬ argparse@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n      └── sprintf-js@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" gkt@https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//tgz.pm2.io/gkt-1.0.0.tgz (node_modules/pm2/node_modules/gkt):")]),s._v("\nnpm WARN network SKIPPING OPTIONAL DEPENDENCY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" connect ETIMEDOUT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.172")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.189")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" fsevents@^"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" (node_modules/pm2/node_modules/chokidar/node_modules/fsevents)"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Unsupported platform for fsevents@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wanted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"os"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"arch"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"any"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" (current"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"os"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"arch"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x64"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br"),a("span",{staticClass:"line-number"},[s._v("200")]),a("br"),a("span",{staticClass:"line-number"},[s._v("201")]),a("br"),a("span",{staticClass:"line-number"},[s._v("202")]),a("br"),a("span",{staticClass:"line-number"},[s._v("203")]),a("br"),a("span",{staticClass:"line-number"},[s._v("204")]),a("br"),a("span",{staticClass:"line-number"},[s._v("205")]),a("br"),a("span",{staticClass:"line-number"},[s._v("206")]),a("br"),a("span",{staticClass:"line-number"},[s._v("207")]),a("br"),a("span",{staticClass:"line-number"},[s._v("208")]),a("br"),a("span",{staticClass:"line-number"},[s._v("209")]),a("br"),a("span",{staticClass:"line-number"},[s._v("210")]),a("br"),a("span",{staticClass:"line-number"},[s._v("211")]),a("br"),a("span",{staticClass:"line-number"},[s._v("212")]),a("br"),a("span",{staticClass:"line-number"},[s._v("213")]),a("br"),a("span",{staticClass:"line-number"},[s._v("214")]),a("br"),a("span",{staticClass:"line-number"},[s._v("215")]),a("br"),a("span",{staticClass:"line-number"},[s._v("216")]),a("br"),a("span",{staticClass:"line-number"},[s._v("217")]),a("br"),a("span",{staticClass:"line-number"},[s._v("218")]),a("br"),a("span",{staticClass:"line-number"},[s._v("219")]),a("br"),a("span",{staticClass:"line-number"},[s._v("220")]),a("br"),a("span",{staticClass:"line-number"},[s._v("221")]),a("br"),a("span",{staticClass:"line-number"},[s._v("222")]),a("br"),a("span",{staticClass:"line-number"},[s._v("223")]),a("br"),a("span",{staticClass:"line-number"},[s._v("224")]),a("br"),a("span",{staticClass:"line-number"},[s._v("225")]),a("br"),a("span",{staticClass:"line-number"},[s._v("226")]),a("br"),a("span",{staticClass:"line-number"},[s._v("227")]),a("br"),a("span",{staticClass:"line-number"},[s._v("228")]),a("br"),a("span",{staticClass:"line-number"},[s._v("229")]),a("br"),a("span",{staticClass:"line-number"},[s._v("230")]),a("br"),a("span",{staticClass:"line-number"},[s._v("231")]),a("br"),a("span",{staticClass:"line-number"},[s._v("232")]),a("br"),a("span",{staticClass:"line-number"},[s._v("233")]),a("br"),a("span",{staticClass:"line-number"},[s._v("234")]),a("br"),a("span",{staticClass:"line-number"},[s._v("235")]),a("br"),a("span",{staticClass:"line-number"},[s._v("236")]),a("br"),a("span",{staticClass:"line-number"},[s._v("237")]),a("br"),a("span",{staticClass:"line-number"},[s._v("238")]),a("br")])]),a("p",[s._v("此时基本上构建 node 项目的准备工作就已经完备了，但是此时有一个问题，那就是之前自己安装完上边两条命令之后就以为可以使用了，然后就在 Jenkins 上开始构建，发现总是会报错，说找不到这个命令，改成绝对路径执行就能执行了，后来明白了。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("Linux 有不少类似的情况，就像这个 node 一样，解压安装之后创建了软链接，此时只是将源码中带着的命令链接到了/usr/bin 目录下，接下来安装的新命令，并没有被链接过去，因此执行的时候会报找不到这个命令的错误。")])]),s._v(" "),a("p",[s._v("那么重新执行一下软链接命令就行了，或者是写入了/etc/profile 中的话，记得在脚本当中及时使用 source 命令对环境进行加载。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/node/bin/* /usr/local/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("现在就可以通过准备好了的环境，先在远程服务器上跑一下服务，如果本地可以跑起来，那么接下来的事儿就好办了。")]),s._v(" "),a("p",[s._v("用启动命令跑一下：")]),s._v(" "),a("p",[s._v("第一次启动会有如下输出：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost h5-node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm run testEnv &")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3854")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 51fanbei-web@0.0.0 testEnv /usr/local/h5-node\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pm2 start ecosystem.json "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--watch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--env")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n\n                        -------------\n\n__/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("____/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("____________/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("____/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____\n _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/////////"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("________/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("__/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///////"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("___\n  _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_______"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("____/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///______"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("__\n   _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("___________/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/___\n    _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/////////____"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/___"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("________/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("//_____\n     _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("____"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///_____"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("//________\n      _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("___/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/___________\n       _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_____________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("__/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_\n        _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///______________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///______________"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("///////////////__\n\n\n                          Community Edition\n\n            Production Process Manager "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Node.js applications\n                     with a built-in Load Balancer.\n\n\n                Start and Daemonize any application:\n                $ pm2 start app.js\n\n                Load Balance "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" instances of api.js:\n                $ pm2 start api.js "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n\n                Monitor "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" production:\n                $ pm2 monitor\n\n                Make pm2 auto-boot at server restart:\n                $ pm2 startup\n\n                To go further checkout:\n                http://pm2.io/\n\n\n                        -------------\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PM2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Spawning PM2 daemon with "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pm2_home")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/.pm2\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PM2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" PM2 Successfully daemonized\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PM2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Applications 51web not running, starting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PM2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" App "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("51web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" launched "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" instances"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n┌──────────┬────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬──────┬──────────┐\n│ App name │ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" │ mode │ pid  │ status │ restart │ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uptime")]),s._v(" │ cpu │ mem       │ user │ watching │\n├──────────┼────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼──────┼──────────┤\n│ 51web    │ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  │ fork │ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3880")]),s._v(" │ online │ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       │ 0s     │ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("%  │ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.1")]),s._v(" MB   │ root │ enabled  │\n└──────────┴────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴──────┴──────────┘\n Use "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("pm2 show "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" to get "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" details about an app\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  完成                  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run testEnv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/0beb9bd9a7af9561.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("好啦，起来啦，使用 pm2 list 可以看到服务此刻的状态。")]),s._v(" "),a("h3",{attrs:{id:"_3-部署脚本。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-部署脚本。"}},[s._v("#")]),s._v(" 3，部署脚本。")]),s._v(" "),a("p",[s._v("那么，现在是时候完善一波脚本了。")]),s._v(" "),a("p",[s._v("首先是 Jenkins 项目配置处的脚本：此处的脚本任务非常简单，那就是调用一下服务器上的真实脚本，咱有事儿服务器上说，大概就是这么个意思。")]),s._v(" "),a("p",[s._v("内容也非常简单：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" /bin/bash /usr/local/scripts/deploy.sh "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$branch")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/5822d5c888442383.jpg",alt:"image"}})]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("注意此处两个变量的来源是上头两个参数化构建出所定义的名字，这里的先后顺序可以自定义，但是要注意上下文调用的时候别搞混了就行。")])]),s._v(" "),a("p",[s._v("现在来到 Jenkins 服务器本机完善重要的中转脚本，此脚本主要完成三件事儿：其一是将代码从 Git 仓库拉过来然后推送到远程服务器；其二就是依据选项参数中的变量内容来传递不同的操作内容；其三就是记录每次部署的 git 版本号，从而实现后来的回滚。")]),s._v(" "),a("p",[s._v("或许此时你可以根据我上边给出的思路，先尝试着思索一下这个脚本该怎么完成，我不希望你直接看了我的文章照搬照抄之后什么都没懂，这种废了功夫一无所获的情况，不是我想看到的。")]),s._v(" "),a("p",[s._v("闲话不多说，上脚本。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MODE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GIT_BRANCH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("MVN-SCP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-vzrtopg")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--progress")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ssh -p 22'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--delete")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WORKSPACE")]),s._v("/* root@192.168.96.81:/usr/local/h5-node\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" root@192.168.96.81 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash /usr/local/scripts/deploy_node.sh"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WORKSPACE")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GIT_BRANCH")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\033[31m[ error ] Failed to checkout the branch\\033[0m'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\033[31m[ error ] Failed to pull the branch\\033[0m'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rev-parse HEAD "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WORKSPACE")]),s._v("/version.log\n   MVN-SCP\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("rollback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HEAD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Head")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" $WORKSPACE/version.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Head")]),s._v("\n   MVN-SCP\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("reboot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" root@192.168.96.81 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash /usr/local/scripts/deploy_node.sh"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n deploy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        deploy\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n rollback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        rollback\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' {deploy|rollback|reboot}"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br")])]),a("p",[s._v("脚本写的比较简单，只是作为一个引子，诸位在自己公司使用的时候，请注意各处的环境变化以及上下文变量的调用等问题。")]),s._v(" "),a("p",[s._v("这里边的操作也都是常规操作，只有其中对于回滚的操作可以说一说，这里是利用 git 自身的特性，然后在每次构建的时候保留下来其"),a("code",[s._v("commit id")]),s._v("到一个固定的 log 文件中，那么如果此时需要回滚，我们只用取出上次构建的"),a("code",[s._v("commit id")]),s._v("并把代码回滚到那个版本，随后再按常规的路数传代码，部署就好啦。就这么简单的一个回滚就完成啦，如果回滚的版本更靠前一些，那么只需要到 Jenkins 服务器上 cd 到$WORKSPACE 目录下 git log 一下，随便挑选哪次的，然后进行回滚就行啦。毕竟，往前回滚好几个版本的事情，基本上发生的几率为 0 吧。")]),s._v(" "),a("p",[s._v("细心的朋友可能注意到了在 rollback 的函数中，使用 HEAD 的时候，前边有一个$HEAD 做的一个判断，那么这个判断的变量名称是从哪里来的呢，其实是在项目配置当中添加的又一个字符参数来实现的。添加效果如下图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/3348bf2950d71493.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("这里的两个参数其实是分属两个工作方向的：")]),s._v(" "),a("p",[a("code",[s._v("branch")]),s._v("是服务于部署的时候直接输入部署的分支，那么就会部署想要部署的分支了。")]),s._v(" "),a("p",[a("code",[s._v("HEAD")]),s._v("是服务于回滚的时候被脚本调用，如果你什么都不操作，只选择了 rollback，那么默认会回滚到上一次部署的版本，如果想要回滚更靠前的版本，那么需要手动输入版本号，即可实现。")]),s._v(" "),a("p",[s._v("配置完成之后构建界面如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/7e7bd11fc74303bb.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("这样就实现了部署回滚这两个功能了。")]),s._v(" "),a("p",[s._v("好啦，上边所有的操作都指向最后的那个远程脚本了，那也别客气了，来亮个相吧。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("base_dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/h5-node\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" pm2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$base_dir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" gulp build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dev")]),s._v(" pro "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run testEnv "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nstop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nstart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("不用惊讶，就是这么简单，因为上个脚本已经把所有工作都做完了，那么这个脚本就只负责一些启动工作就好啦。")]),s._v(" "),a("p",[s._v("另外要注意的一个点是，与 java 编译成 war 包不同的是，这个 node 项目并不需要删掉整个目录然后再 scp，更适合使用 rsync 这个命令进行两端同步。")]),s._v(" "),a("p",[s._v("现在我们去看下在 Jenkins 的框架中嵌入这些脚本会有什么效果：")]),s._v(" "),a("p",[s._v("首先构建一下 master 分支：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/5d876b6375291884.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("去看下结果如何：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/064b6de24b3bb52a.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("容我趾高气昂的原地转三圈，事实上一个项目的构建就是这么简单。")]),s._v(" "),a("p",[s._v("如何验证自己刚才发布的是否成功了呢？")]),s._v(" "),a("p",[s._v("我们去项目所在服务器，执行一下查看服务状态的命令就知道了：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/49ba54bf63ff21ab.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("图中红框圈出的就是运行了 10s 的意思。")]),s._v(" "),a("p",[s._v("接下来在验证一下"),a("code",[s._v("回滚")]),s._v("的效果如何。")]),s._v(" "),a("p",[s._v("此时要说明下我们看版本是否回滚的思路，因为经过我的测试，从 Jenkins 那里看是否回滚是没有效果的，因为我们的操作是在脚本层面进行的，其次这些操作也都是在服务器上进行的，因此查看是否回滚成功就不能通过 Jenkins 构建历史当中的构建信息来判断了，这句话很重要，关乎你对这里掌握是否熟练的问题，如果不明白，请阅读本段话三遍。")]),s._v(" "),a("p",[s._v("那么该如何来判断是否回滚到上一个版本了呢，依据脚本里的操作，我觉得可以从我们创建测 version.log 中记录的版本号，与$WORKSPACE 中代码的版本进行比对，如果回滚的构建让版本号变成了上一次构建的版本号，则说明回滚成功。")]),s._v(" "),a("p",[s._v("下面我将分别列出两种验证的方案的结果来帮助理解上边的两段话。")]),s._v(" "),a("h3",{attrs:{id:"第一种是错误的示范。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一种是错误的示范。"}},[s._v("#")]),s._v(" 第一种是错误的示范。")]),s._v(" "),a("p",[a("code",[s._v("思路：")])]),s._v(" "),a("p",[s._v("我们去看三次构建信息，第一次是正常构建，第二次也是正常构建，第三次是把版本回滚到第一次的构建。")]),s._v(" "),a("ul",[a("li",[s._v("第一次构建：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/4a136423f2f57b6f.jpg",alt:"image"}})]),s._v(" "),a("ul",[a("li",[s._v("第二次构建：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a5cdbe084dfccbc2.jpg",alt:"image"}})]),s._v(" "),a("ul",[a("li",[s._v("第三次回滚到第一次的构建：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a4f5ea44941bd4f1.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("什么鬼，明明要回滚到第一次构建的呢，怎么还是第二次构建的分支以及版本号呢，这就是这个地方的一个小问题，也是上边那两段话表达的意思，其实是发生了变化的，只不过从这里，看不出来的。")]),s._v(" "),a("p",[s._v("到底怎么看呢？")]),s._v(" "),a("h3",{attrs:{id:"第二种正确的示范。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二种正确的示范。"}},[s._v("#")]),s._v(" 第二种正确的示范。")]),s._v(" "),a("p",[a("code",[s._v("思路：")])]),s._v(" "),a("p",[s._v("我们构建完第一次，来到服务器看 version.log 最底下的版本号，然后 git log 看看是否对照。")]),s._v(" "),a("p",[s._v("构建完第二次，同样是上边第一次的操作，然后验证是否对照。")]),s._v(" "),a("p",[s._v("第三次回滚完成，先看倒数第二次的（也就是第一次构建的）版本号是多少，然后与 git log 看看是否对照。")]),s._v(" "),a("p",[s._v("试验之前先将 version.log 清空。")]),s._v(" "),a("ul",[a("li",[s._v("第一次构建：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/33bc0b8b818510ec.jpg",alt:"image"}})]),s._v(" "),a("ul",[a("li",[s._v("第二次构建：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a6f44dfc270911e1.jpg",alt:"image"}})]),s._v(" "),a("ul",[a("li",[s._v("第三次回滚：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/9893bcf43e91f308.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("由此可见回滚到上一个版本已经完成。")]),s._v(" "),a("p",[s._v("换句话说，回滚到上一个版本只是我们做的一个默认值，如果想往更靠前的回滚，那么只用将那个版本的 commit id 拷贝到构建选项中，举例如下图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/5c9fb44de4aed03d.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("那么这个项目是可以回滚到之前任一版本的。")]),s._v(" "),a("p",[s._v("世上无难事，只要肯钻研琢磨，吃透了之后，Jenkins 会成为一个非常顺手的工具。")]),s._v(" "),a("p",[s._v("那么最后小结一下：")]),s._v(" "),a("p",[s._v("1，Jenkins 项目配置处拉取代码，然后通过选项参数定义出部署，回滚重启等变量。通过字符参数定义出要部署的分支，或者要回滚的 commit id。")]),s._v(" "),a("p",[s._v("2，根据用户选择的构建需求，将变量传递下去，通过中间脚本将想要部署的代码传到远程服务器，然后调用远程重启脚本。")]),s._v(" "),a("p",[s._v("3，远程服务器这里配置好准备环境，以后就只用重启就行啦。")]),s._v(" "),a("h2",{attrs:{id:"补充一-后来的一些思考。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充一-后来的一些思考。"}},[s._v("#")]),s._v(" 补充一：后来的一些思考。")]),s._v(" "),a("p",[s._v("原本对于 node 项目以为足够了解了，然而在后来与朋友的一个偶然聊天当中，竟然聊出了另外的一些东东。他们公司发布 node 项目的方案大致的流程是在 Jenkins 本机拉代码，然后在本地进行 install 安装依赖，这样尽管使用的阿里的源，仍旧会非常麻烦且耗时间，等万事俱备之后，再将整个目录进行压缩，往远方服务器进行拷贝部署，思路有点与 java 项目部署的思路相像。")]),s._v(" "),a("p",[s._v("可是，我们公司从来都是这么弄得呀，这就激起了我的兴趣，事实上在这段聊天之前，在我的脑海当中，几乎认为 node 项目大概就是像本文所写的方式进行部署的罢，然而，事实似乎并没有我想象中的这么简单。")]),s._v(" "),a("p",[s._v("于是，我跑去前端小伙伴那里，问他：咱们都是第一次安装的时候进行 node install 解决了所有的依赖，那么以后发布当中如果有新的依赖之类的，是怎么处理的呢，他回应说，是由开发人员将新增的依赖加入到版本控制，一般都是跟新代码一起上线了，因此不会报出什么问题。")]),s._v(" "),a("p",[s._v("了解到这么多，感觉很多地方你省心了，也许就是别人已经费心了。总之，不断思考，不断最优，是我们不断的追随！")]),s._v(" "),a("h2",{attrs:{id:"补充二-新遇到的一个坑。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充二-新遇到的一个坑。"}},[s._v("#")]),s._v(" 补充二：新遇到的一个坑。")]),s._v(" "),a("p",[s._v("公司开发小伙伴看到测试服务器一大堆，感觉到心累，因此想到优化方案，打算把前端项目重构，思路与 nginx 功能类似，大概就是部署一个独立的服务，比如用"),a("code",[s._v("abc.com")]),s._v("进行访问，那么新建一个测试，打包成一个 test 目录，放到独立服务下，然后访问"),a("code",[s._v("abc.com/test")]),s._v("就是对应的服务了，如此一来，无论添加几个服务，都是没有问题的。")]),s._v(" "),a("p",[s._v("思路蛮不错的，说干就干，但是他们开发完成之后，在打包的时候却出现问题了，总是报错。")]),s._v(" "),a("p",[s._v("最后才发现，当 Jenkins 把代码拉去到 Jenkins 本地之后，通过 rsync 的方式往远端服务器同步，结果项目里边的一些"),a("code",[s._v("隐藏文件")]),s._v("没有传输过去，结果就导致了打包报错。")]),s._v(" "),a("p",[s._v("我在测试服务器本身进行"),a("code",[s._v("git clone")]),s._v("发现里边确实有隐藏文件，然后"),a("code",[s._v("mv a/* b")]),s._v("下，在去到 b 目录里打包，发现又报错，原来这种 mv 的方式也是无法移动隐藏文件的，要想连隐藏文件一起移动过去，则需要"),a("code",[s._v("mv a/.* b")]),s._v("下，如此则可以保证所有文件都移动过去啦！！")])])}),[],!1,null,null,null);a.default=e.exports}}]);