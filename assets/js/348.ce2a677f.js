(window.webpackJsonp=window.webpackJsonp||[]).push([[348],{692:function(s,a,n){"use strict";n.r(a);var r=n(0),t=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-认识-sonar。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-认识-sonar。"}},[s._v("#")]),s._v(" 1，认识 sonar。")]),s._v(" "),a("p",[s._v("Sonar 是一个用于代码质量管理的开源平台，用于管理源代码的质量，可以从七个维度检测代码质量，通过插件形式，可以支持包括 java,C#,C/C++,PL/SQL,Cobol,JavaScrip,Groovy 等等二十几种编程语言的代码质量管理与检测。")]),s._v(" "),a("p",[s._v("通过插件机制，Sonar 可以集成不同的测试工具，代码分析工具，以及持续集成工具。与持续集成工具（例如 Hudson/Jenkins 等）不同，Sonar 并不是简单地把不同的代码检查工具结果（例如 FindBugs，PMD 等）直接显示在 Web 页面上，而是通过不同的插件对这些结果进行再加工处理，通过量化的方式度量代码质量的变化，从而可以方便地对不同规模和种类的工程进行代码质量管理。")]),s._v(" "),a("p",[s._v("在对其他工具的支持方面，Sonar 不仅提供了对 IDE 的支持，可以在 Eclipse 和 IntelliJ IDEA 这些工具里联机查看结果；同时 Sonar 还对大量的持续集成工具提供了接口支持，可以很方便地在持续集成中使用 Sonar。")]),s._v(" "),a("p",[s._v("此外，Sonar 的插件还可以对 Java 以外的其他编程语言提供支持，对国际化以及报告文档化也有良好的支持。")]),s._v(" "),a("h2",{attrs:{id:"_2-部署前准备。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署前准备。"}},[s._v("#")]),s._v(" 2，部署前准备。")]),s._v(" "),a("ul",[a("li",[s._v("主程序包：https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-6.7.5.zip")]),s._v(" "),a("li",[s._v("cli 程序包：https://github.com/SonarSource/sonar-scanner-cli/archive/3.0.3.778.zip")]),s._v(" "),a("li",[s._v("中文语言包：https://github.com/SonarQubeCommunity/sonar-l10n-zh/archive/sonar-l10n-zh-plugin-1.19.zip")])]),s._v(" "),a("p",[s._v("下载完成之后，将如上包传入服务器中。")]),s._v(" "),a("p",[s._v("因为上边下载的包在使用过程中还需要一些其他操作，因此这里直接将可用的包打包，存在百度云。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("下载地址：https://pan.baidu.com/s/1LvTj22Xzrmoh6T0GmyAuPA")])]),s._v(" "),a("li",[a("p",[s._v("提取码：jyuh")])])]),s._v(" "),a("h2",{attrs:{id:"_3-正式部署。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-正式部署。"}},[s._v("#")]),s._v(" 3，正式部署。")]),s._v(" "),a("h3",{attrs:{id:"_1-依赖。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-依赖。"}},[s._v("#")]),s._v(" 1，依赖。")]),s._v(" "),a("p",[s._v("整个环境依赖 jdk 环境（官方建议使用 OpenJDK 8），也要准备好 maven 工具在系统中，这两个的准备工作就不详细展示了。")]),s._v(" "),a("p",[s._v("对于主机配置的要求，官方建议是，实例需要至少 2GB 的 RAM 才能有效运行，并且 1GB 的可用 RAM 用于操作系统。磁盘方面，如果代码量足够大，那么应该给予足够大（150G）的磁盘，并且是出色读写性能的硬盘。")]),s._v(" "),a("p",[s._v("本次部署也是在 Jenkins 主机上直接进行的部署操作")]),s._v(" "),a("h3",{attrs:{id:"_2-创建数据库。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建数据库。"}},[s._v("#")]),s._v(" 2，创建数据库。")]),s._v(" "),a("p",[s._v("关于数据库，如果选择 MySQL，那么官方建议的是 5.6 和 5.7 这两个版本，这里我使用 5.6 版本的。")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("curl 192.168.10.10/a | sh")]),s._v("进行安装，安装完成之后，创建如下数据库：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" sonar "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARACTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" utf8 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLLATE")]),s._v(" utf8_general_ci"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" sonar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" sonar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" FLUSH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_3-使用普通用户。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用普通用户。"}},[s._v("#")]),s._v(" 3，使用普通用户。")]),s._v(" "),a("p",[s._v("这里使用普通用户来管理 sonar，因为后边如果使用 root 启动会报错，这个还真别不听，如果不信，可以自己测试一下，主要是到时候的 elasticsearch 组件会因为 root 启动而报错"),a("code",[s._v("can not run elasticsearch as root")]),s._v("，所以还是乖乖的使用普通用户来部署吧。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@localhost ~]$useradd sonar\n[root@localhost ~]$passwd sonar\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("给刚刚创建的普通用户以 sudo 权限。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@localhost opt]$vim /etc/sudoers\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在第 93 行添加如下内容：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sonar    ALL=(ALL)       ALL\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("顺便在这个当口，将程序的文件打开数放开一下：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vim")]),s._v(" /etc/security/limits.conf\n\n在最末尾添加：\n\nsonarqube   -   nofile   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nsonarqube   -   nproc    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_4-sonarqube-安装。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-sonarqube-安装。"}},[s._v("#")]),s._v(" 4，SonarQube 安装。")]),s._v(" "),a("p",[s._v("以下操作将在刚刚创建的普通用户 sonar 下进行。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("1，先将刚刚的文件传输到服务器。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[sonar@jenkins ~]$ls\nsonar-l10n-zh-sonar-l10n-zh-plugin-1.19.zip  sonarqube-6.7.5.zip  sonar-scanner-cli-3.0.3.778.zip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("2，解压部署 sonarqube。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$unzip")]),s._v(" sonarqube-6.7.5.zip\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mv")]),s._v(" sonarqube-6.7.5 sonarqube\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ll")]),s._v(" sonarqube\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" sonar sonar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("136")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":29 bin\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":20 conf\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7651")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":20 COPYING\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":20 data\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" sonar sonar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("150")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":29 elasticsearch\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":20 extensions\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" sonar sonar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("140")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":29 lib\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":20 logs\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":20 temp\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" sonar sonar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":29 web\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("3，将 mysql 启动包导入。")]),s._v(" "),a("p",[s._v("包名称"),a("code",[s._v("mysql-connector-java-5.1.40.jar")]),s._v("，此包在"),a("a",{attrs:{href:"http://maven.aliyun.com/mvn/search",target:"_blank",rel:"noopener noreferrer"}},[s._v("maven.aliyun.com"),a("OutboundLink")],1),s._v("里边搜索一下即可找到，上边的完整包里边已经包含。")]),s._v(" "),a("p",[s._v("下载之后传到服务器，放在对应目录下：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mkdir")]),s._v(" sonarqube/extensions/jdbc-driver/mysql\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mv")]),s._v(" mysql-connector-java-5.1.40.jar  sonarqube/extensions/jdbc-driver/mysql/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注意其中的路径，不要放错位置了。")])]),s._v(" "),a("li",[a("p",[s._v("4，配置 sonarqube。")]),s._v(" "),a("p",[s._v("sonar 的配置文件在"),a("code",[s._v("/home/sonar/sonarqube/conf/sonar.properties")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vim")]),s._v(" /home/sonar/sonarqube/conf/sonar.properties\n配置如下三条：\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.jdbc.username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sonar\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.jdbc.password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sonar\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.jdbc.url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jdbc:mysql://localhost:3306/sonar?useUnicode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("characterEncoding")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rewriteBatchedStatements")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useConfigs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("maxPerformance"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useSSL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("当然，如果数据库不在本机，那么 localhost 可以更改为对应主机 ip。")]),s._v(" "),a("p",[s._v("下面是可以配置的一些其他参数：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sonar.jdbc.maxActive=60")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sonar.jdbc.maxIdle=5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sonar.jdbc.minIdle=2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sonar.jdbc.maxWait=5000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sonar.jdbc.minEvictableIdleTimeMillis=600000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sonar.jdbc.timeBetweenEvictionRunsMillis=30000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])]),s._v(" "),a("p",[s._v("保存出来。")]),s._v(" "),a("h3",{attrs:{id:"_5-sonar-scanner-安装。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-sonar-scanner-安装。"}},[s._v("#")]),s._v(" 5，sonar-scanner 安装。")]),s._v(" "),a("ul",[a("li",[s._v("1，解压之后配置。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$unzip")]),s._v(" sonar-scanner-cli-3.0.3.778.zip\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mv")]),s._v(" sonar-scanner-cli-3.0.3.778 sonar-scanner\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ll")]),s._v(" sonar-scanner\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2585")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" appveyor.ps1\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("351")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" appveyor.yml\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" it\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7635")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" LICENSE.txt\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("179")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" NOTICE.txt\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12308")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" pom.xml\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("812")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" README.md\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("264")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" run_integration_tests.sh\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" src\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("166")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" third-party-licenses.sh\n-rwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("475")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" travis.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("2，编译打包。")])]),s._v(" "),a("li",[a("p",[s._v("注意，这个地方是要进行一些配置的，但是目前这种情况是无法配置的，也就是说，这个 cli 需要编译之后才能够使用，那么可以通过 maven 工具进行编译，也可以直接在安装包里下载可用的包。")]),s._v(" "),a("p",[s._v("如果你的 maven 工具已经配置好了，那么可以直接运行如下命令构建：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[sonar@jenkins sonar-scanner]$mvn clean install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("​ 打包之后，会多出一个 target 目录，查看里边的文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins sonar-scanner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ls")]),s._v(" target/\narchive-tmp  generated-sources       maven-archiver  original-sonar-scanner-cli-3.0.3-SNAPSHOT.jar  sonar-scanner-cli-3.0.3-SNAPSHOT.jar          surefire-reports\nclasses      generated-test-sources  maven-status    sonar-scanner-3.0.3-SNAPSHOT.zip               sonar-scanner-cli-3.0.3-SNAPSHOT-sources.jar  test-classes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("而那个"),a("code",[s._v("sonar-scanner-3.0.3-SNAPSHOT.zip")]),s._v("就是我们需要的文件了。")])]),s._v(" "),a("li",[a("p",[s._v("拿出来，重新操作一波。")])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[sonar@jenkins sonar-scanner]$mv target/sonar-scanner-3.0.3-SNAPSHOT.zip ~/\n[sonar@jenkins sonar-scanner]$cd\n[sonar@jenkins ~]$unzip sonar-scanner-3.0.3-SNAPSHOT.zip\n[sonar@jenkins ~]$ls\nsonar-l10n-zh-sonar-l10n-zh-plugin-1.19.zip  sonarqube-6.7.5.zip  sonar-scanner-3.0.3-SNAPSHOT      sonar-scanner-cli-3.0.3.778.zip\nsonarqube                                    sonar-scanner        sonar-scanner-3.0.3-SNAPSHOT.zip\n[sonar@jenkins ~]$rm -rf sonar-scanner\n[sonar@jenkins ~]$mv sonar-scanner-3.0.3-SNAPSHOT sonar-scanner\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("3，配置。")]),s._v(" "),a("p",[s._v("接下来才可正式进入 cli 的配置。")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[sonar@jenkins ~]$vim /home/sonar/sonar-scanner/conf/sonar-scanner.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将如下三句添加在文件末尾：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sonar.jdbc.username=sonar\nsonar.jdbc.password=sonar\nsonar.jdbc.url=jdbc:mysql://localhost:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true&useConfigs=maxPerformance\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_6-配置环境变量。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-配置环境变量。"}},[s._v("#")]),s._v(" 6，配置环境变量。")]),s._v(" "),a("p",[s._v("这里切回到 root 用户进行添加。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@jenkins ~]$vim /etc/profile\n\n在末尾添加：\n\n#set sonar-quebe and sonar_runner_home\nexport SONAR_HOME=/home/sonar/sonarqube\nexport SONAR_RUNNER_HOME=/home/sonar/sonar-scanner\nexport PATH=$PATH:$SONAR_HOME/bin/linux-x86-64:$SONAR_RUNNER_HOME/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("加载配置，注意，在加载之前，请确保主机目录与我上边的是一致的，否则可能出现环境被搞乱的风险。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[sonar@jenkins ~]$source /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_7-运行-sonarqube。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-运行-sonarqube。"}},[s._v("#")]),s._v(" 7，运行 sonarqube。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cd")]),s._v(" sonarqube/bin/linux-x86-64/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins linux-x86-64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ls")]),s._v("\nlib  sonar.sh  wrapper\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins linux-x86-64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$./sonar.sh\nUsage: ./sonar.sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" console "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" stop "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" restart "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" dump "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins linux-x86-64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$./sonar.sh start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("关于启动脚本的各项参数，已经在上边展示出来了，可以尝试一下。")]),s._v(" "),a("p",[s._v("等待一会儿，就可以访问了。")]),s._v(" "),a("p",[s._v("通过 192.168.10.3:9000 进行访问。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/f8027181aff40868.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("点击 login，用户名密码默认为 admin/admin 进行登入。")]),s._v(" "),a("p",[s._v("开始有一个教程，不过先跳过：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/50a78645ebaa3947.jpg",alt:"image"}})]),s._v(" "),a("h3",{attrs:{id:"_8-配置开机自启动。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-配置开机自启动。"}},[s._v("#")]),s._v(" 8，配置开机自启动。")]),s._v(" "),a("p",[s._v("我的主机用的是 CentOS-7。")]),s._v(" "),a("p",[s._v("先将启动命令加入环境中。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /home/sonar/sonarqube/bin/linux-x86-64/sonar.sh /usr/bin/sonar\n\n验证一下：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sonar")]),s._v(" status\nSonarQube is running "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("36982")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("然后创建 service 管理方式。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vim")]),s._v(" /etc/init.d/sonar\n\n添加如下内容：\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rc file for SonarQube")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig: 345 96 10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# description: SonarQube system (www.sonarsource.org)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### BEGIN INIT INFO")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Provides: sonar")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Required-Start: $network")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Required-Stop: $network")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default-Start: 3 4 5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default-Stop: 0 1 2 6")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Short-Description: SonarQube system (www.sonarsource.org)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Description: SonarQube system (www.sonarsource.org)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### END INIT INFO")]),s._v("\n\n/usr/bin/sonar "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("简单配置：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /etc/init.d/sonar\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$chkconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--add")]),s._v(" sonar\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$chkconfig")]),s._v(" sonar on\n\n测试一下：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$service")]),s._v(" sonar status\nSonarQube is running "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("36982")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_9-插件安装。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-插件安装。"}},[s._v("#")]),s._v(" 9，插件安装。")]),s._v(" "),a("p",[s._v("这里主要先安装一个中文语言包的插件。")]),s._v(" "),a("p",[s._v("插件下载地址：https://github.com/SonarQubeCommunity/sonar-l10n-zh")]),s._v(" "),a("p",[s._v("唯一要注意的问题就是，版本要与刚刚安装的相对应。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/0b05ebc02096e9eb.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("下载之后传入到服务器当中。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$unzip")]),s._v(" sonar-l10n-zh-sonar-l10n-zh-plugin-1.19.zip\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ll")]),s._v(" sonar-l10n-zh-sonar-l10n-zh-plugin-1.19\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("79")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" compare\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3436")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" pom.xml\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("983")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" README.md\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" src\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("同样这里需要编译之后才能使用，当然也可以在刚才的链接当中直接下载所需的 jar 包。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins sonar-l10n-zh-sonar-l10n-zh-plugin-1.19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mvn")]),s._v(" clean "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n同样的，编译完成之后会多一个target的目录。\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins sonar-l10n-zh-sonar-l10n-zh-plugin-1.19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ll")]),s._v(" target/\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 classes\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 generated-sources\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 generated-test-sources\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 maven-archiver\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 maven-status\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sonar sonar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38340")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 sonar-l10n-zh-plugin-1.19-RC2-SNAPSHOT.jar\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sonar sonar   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 surefire-reports\ndrwxrwxr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" sonar sonar    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":48 test-classes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("我们所需要的就是编译出来的 jar 包，把 jar 包移动到"),a("code",[s._v("/home/sonar/sonarqube/extensions/plugins")]),s._v("目录下即可。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins sonar-l10n-zh-sonar-l10n-zh-plugin-1.19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mv")]),s._v(" target/sonar-l10n-zh-plugin-1.19-RC2-SNAPSHOT.jar /home/sonar/sonarqube/extensions/plugins/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("移动之后重启一下服务即可。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@jenkins ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$/home/sonar/sonarqube/bin/linux-x86-64/sonar.sh restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("重启完成之后，再去浏览器刷新一下，发现系统已经变成中文的了。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/c9547bc45af5edaf.jpg",alt:"image"}})]),s._v(" "),a("h2",{attrs:{id:"_4-jenkins-构建。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-jenkins-构建。"}},[s._v("#")]),s._v(" 4，Jenkins 构建。")]),s._v(" "),a("h3",{attrs:{id:"_1-添加插件。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-添加插件。"}},[s._v("#")]),s._v(" 1，添加插件。")]),s._v(" "),a("p",[s._v("首先在 Jenkins 当中下载对应的插件。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/c64468532e498308.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("插件安装完成之后，在 jenkins 的”系统管理”–》“系统设置”， 就能看到 SonarQube servers 的配置点，截图如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/5148a68fc053737e.jpg",alt:"image"}})]),s._v(" "),a("h3",{attrs:{id:"_2-添加用户。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加用户。"}},[s._v("#")]),s._v(" 2，添加用户。")]),s._v(" "),a("p",[s._v("配置之前，需要先在 sonar 当中添加一个连接用户。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/8540a5a7d2f33d83.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("这里创建一个用户，用户名为 test，秘钥复制下来。回到刚刚 Jenkins 处进行配置：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/207adbef1dd1873b.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("注意这里的 URL，应当填写部署 sonar 的主机 ip，即便你是同样部署的 Jenkins 本机的，也不要写成 localhost，因为在后边会用到这个配置信息。")]),s._v(" "),a("h3",{attrs:{id:"_3-添加工具。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加工具。"}},[s._v("#")]),s._v(" 3，添加工具。")]),s._v(" "),a("p",[s._v("在 Jenkins 的系统管理中的全局工具当中，添加 sonar 工具。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/9c51f0220456c3e0.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("与此同时，不用多说的，也应将 jdk 的工具，maven 的工具配置完善。")]),s._v(" "),a("p",[a("code",[s._v("jdk：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/f6650fd7551f5c10.jpg",alt:"image"}})]),s._v(" "),a("p",[a("code",[s._v("maven:")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/93ef5111846e8c9d.jpg",alt:"image"}})]),s._v(" "),a("h3",{attrs:{id:"_4-创建一个测试项目。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建一个测试项目。"}},[s._v("#")]),s._v(" 4，创建一个测试项目。")]),s._v(" "),a("p",[s._v("创建一个 maven 风格的名称为 test-sonar 的项目。")]),s._v(" "),a("p",[s._v("过程不详细说了，直接看截图。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/d54c8720fed91819.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("其中的 sonar 片段，除了定义一个名称，选中刚刚添加的 jdk 工具，重要的就是当中的那段配置了。")]),s._v(" "),a("p",[s._v("内容如下：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#项目key (随意输入，必填项)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.projectKey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test-sonar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#项目名称和版本（必填项）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.language")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("java\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.projectVersion")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\nsonar.sourceEncoding "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UTF-8\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.projectName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test-sonar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#源码位置（必填项，相对于jenkins的workspace路径，例如，我此时的绝对路径为~/.jenkins/workspace/Test/test-webapp/src/main/java）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.sources")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("src/main/java\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编译后的class位置（必填项，旧版本此项可不填，建议还是填入，相对路径同上）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sonar.java.binaries")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("target/classes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("然后保存项目，构建一次。")]),s._v(" "),a("p",[s._v("在构建界面中，可以看到一些不一样的东东。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/41a113dd3117ac0e.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("左侧的 SonarQube 点击之后可以直接跳转到这个项目对应的 sonar 中的结果。")]),s._v(" "),a("h3",{attrs:{id:"_5-查看结果。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-查看结果。"}},[s._v("#")]),s._v(" 5，查看结果。")]),s._v(" "),a("p",[s._v("来到 sonar 界面当中，刷新一下，首先映入眼帘的，就是我们刚刚定义的一个 test-sonar 的项目展示。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/d8098c8ae21f3618.jpg",alt:"image"}})]),s._v(" "),a("p",[s._v("到这里，基本上关于这个代码检测的开源工具流程就结束了，剩下的，就是深入使用，慢慢详细了解其中的各个功能，以帮助于日常工作。")])])}),[],!1,null,null,null);a.default=t.exports}}]);