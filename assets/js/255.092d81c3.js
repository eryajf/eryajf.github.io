(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{596:function(a,s,t){"use strict";t.r(s);var e=t(0),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("集群监控有不少方案，这里介绍一种国人研发的，经常看到有人推荐的一个方案，"),s("code",[a._v("Kafka Eagle")]),a._v("。")]),a._v(" "),s("h2",{attrs:{id:"_1-资料。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-资料。"}},[a._v("#")]),a._v(" 1，资料。")]),a._v(" "),s("ul",[s("li",[a._v("官网：https://www.kafka-eagle.org/index.html")]),a._v(" "),s("li",[a._v("Github：https://github.com/smartloli/kafka-eagle/")]),a._v(" "),s("li",[a._v("官方文档：https://docs.kafka-eagle.org/")]),a._v(" "),s("li",[a._v("下载地址：http://download.kafka-eagle.org/")])]),a._v(" "),s("h2",{attrs:{id:"_2-部署。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署。"}},[a._v("#")]),a._v(" 2，部署。")]),a._v(" "),s("p",[a._v("当我们把 kafka 集群部署完成之后，就可以部署"),s("code",[a._v("Kafka Eagle")]),a._v("监控系统了。")]),a._v(" "),s("p",[a._v("github 上的 releases 中事实上还是源码，而源码可能不容易编译成功，因此可以直接通过官网的下载地址下载作者已经提供的编译好的包进行部署。")]),a._v(" "),s("h3",{attrs:{id:"_1-下载包。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载包。"}},[a._v("#")]),a._v(" 1，下载包。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://codeload.github.com/smartloli/kafka-eagle-bin/tar.gz/v1.3.3\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-解压包。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-解压包。"}},[a._v("#")]),a._v(" 2，解压包。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" xf v1.3.3\nl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\nkafka-eagle-bin-1.3.3  v1.3.3\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" kafka-eagle-bin-1.3.3/\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost kafka-eagle-bin-1.3.3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\nkafka-eagle-web-1.3.3-bin.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost kafka-eagle-bin-1.3.3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" xf kafka-eagle-web-1.3.3-bin.tar.gz\nl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost kafka-eagle-bin-1.3.3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\nkafka-eagle-web-1.3.3  kafka-eagle-web-1.3.3-bin.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost kafka-eagle-bin-1.3.3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" kafka-eagle-web-1.3.3 /opt/kafka-eagle\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("h3",{attrs:{id:"_3-配置环境变量。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置环境变量。"}},[a._v("#")]),a._v(" 3，配置环境变量。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/profile "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF\nexport JAVA_HOME=/usr/local/jdk1.8.0_192\nexport KE_HOME=/opt/kafka-eagle\nexport PATH="),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v(":"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KE_HOME")]),a._v("\nEOF")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h3",{attrs:{id:"_4-配置-system-config-properties-文件。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置-system-config-properties-文件。"}},[a._v("#")]),a._v(" 4，配置 system-config.properties 文件。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置多个Kafka集群所对应的Zookeeper")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.zk.cluster.alias")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("cluster1\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster1.zk.list")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".106.7:2181,192.168.106.8:2181,192.168.106.9:2181\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#cluster2.zk.list=xdn10:2181,xdn11:2181,xdn12:2181")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置Zookeeper线程数")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.zk.limit.size")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置Kafka Eagle浏览器访问端口")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.webui.port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8048")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果你的offsets存储在Kafka中，这里就配置")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 属性值为kafka，如果是在Zookeeper中，可以")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注释该属性。一般情况下，Offsets的也和你消")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 费者API有关系，如果你使用的Kafka版本为0.10.x")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以后的版本，但是，你的消费API使用的是0.8.2.x")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 时的API，此时消费者依然是在Zookeeper中")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster1.kafka.eagle.offset.storage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("kafka\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#cluster2.kafka.eagle.offset.storage=zk")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 是否启动监控图表，默认是不启动的")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.metrics.charts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在使用Kafka SQL查询主题时，如果遇到错误，")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 可以尝试开启这个属性，默认情况下，不开启")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.sql.fix.error")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kafka sql topic records max")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.sql.topic.records.max")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 邮件服务器设置，用来告警")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.mail.enable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.mail.sa")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("alert_sa@163.com\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.mail.username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("alert_sa@163.com\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.mail.password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mqslimczkdqabbbh\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.mail.server.host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("smtp.163.com\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.mail.server.port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# alarm im configure")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.dingding.enable=true")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.dingding.url=https://oapi.dingtalk.com/robot/send?access_token=")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.enable=true")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.token=https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=xxx&corpsecret=xxx")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.url=https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.touser=")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.toparty=")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.totag=")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#kafka.eagle.im.wechat.agentid=")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 超级管理员删除主题的Token")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.topic.token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("keadmin\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果启动Kafka SASL协议，开启该属性")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster1.kafka.eagle.sasl.enable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster1.kafka.eagle.sasl.protocol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SASL_PLAINTEXT\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster1.kafka.eagle.sasl.mechanism")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAIN\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster2.kafka.eagle.sasl.enable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster2.kafka.eagle.sasl.protocol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SASL_PLAINTEXT\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster2.kafka.eagle.sasl.mechanism")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAIN\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Kafka Eagle默认存储在Sqlite中，如果要使用")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# MySQL可以替换驱动、用户名、密码、连接地址")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.driver")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.sqlite.JDBC\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("jdbc:sqlite:/opt/kafka-eagle/db/ke.db\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("kafka.eagle.password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("smartloli\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br"),s("span",{staticClass:"line-number"},[a._v("48")]),s("br"),s("span",{staticClass:"line-number"},[a._v("49")]),s("br"),s("span",{staticClass:"line-number"},[a._v("50")]),s("br"),s("span",{staticClass:"line-number"},[a._v("51")]),s("br"),s("span",{staticClass:"line-number"},[a._v("52")]),s("br"),s("span",{staticClass:"line-number"},[a._v("53")]),s("br"),s("span",{staticClass:"line-number"},[a._v("54")]),s("br"),s("span",{staticClass:"line-number"},[a._v("55")]),s("br"),s("span",{staticClass:"line-number"},[a._v("56")]),s("br"),s("span",{staticClass:"line-number"},[a._v("57")]),s("br"),s("span",{staticClass:"line-number"},[a._v("58")]),s("br"),s("span",{staticClass:"line-number"},[a._v("59")]),s("br"),s("span",{staticClass:"line-number"},[a._v("60")]),s("br"),s("span",{staticClass:"line-number"},[a._v("61")]),s("br"),s("span",{staticClass:"line-number"},[a._v("62")]),s("br"),s("span",{staticClass:"line-number"},[a._v("63")]),s("br"),s("span",{staticClass:"line-number"},[a._v("64")]),s("br"),s("span",{staticClass:"line-number"},[a._v("65")]),s("br"),s("span",{staticClass:"line-number"},[a._v("66")]),s("br"),s("span",{staticClass:"line-number"},[a._v("67")]),s("br"),s("span",{staticClass:"line-number"},[a._v("68")]),s("br"),s("span",{staticClass:"line-number"},[a._v("69")]),s("br"),s("span",{staticClass:"line-number"},[a._v("70")]),s("br"),s("span",{staticClass:"line-number"},[a._v("71")]),s("br"),s("span",{staticClass:"line-number"},[a._v("72")]),s("br"),s("span",{staticClass:"line-number"},[a._v("73")]),s("br"),s("span",{staticClass:"line-number"},[a._v("74")]),s("br"),s("span",{staticClass:"line-number"},[a._v("75")]),s("br"),s("span",{staticClass:"line-number"},[a._v("76")]),s("br"),s("span",{staticClass:"line-number"},[a._v("77")]),s("br"),s("span",{staticClass:"line-number"},[a._v("78")]),s("br"),s("span",{staticClass:"line-number"},[a._v("79")]),s("br")])]),s("h3",{attrs:{id:"_5-启动-kafka-eagle。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动-kafka-eagle。"}},[a._v("#")]),a._v(" 5，启动 Kafka Eagle。")]),a._v(" "),s("p",[a._v("配置完成后，可以执行 Kafka Eagle 脚本 ke.sh。如果首次执行，需要给该脚本赋予执行权限，命令如下：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod +x $KE_HOME/bin/ke.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("在 ke.sh 脚本中，支持以下命令：")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[a._v("命令")]),a._v(" "),s("th",{staticStyle:{"text-align":"center"}},[a._v("说明")])])]),a._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[a._v("ke.sh start")]),a._v(" "),s("td",{staticStyle:{"text-align":"center"}},[a._v("启动 Kafka Eagle 系统")])]),a._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[a._v("ke.sh stop")]),a._v(" "),s("td",{staticStyle:{"text-align":"center"}},[a._v("停止 Kafka Eagle 系统")])]),a._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[a._v("ke.sh restart")]),a._v(" "),s("td",{staticStyle:{"text-align":"center"}},[a._v("重启 Kafka Eagle 系统")])]),a._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[a._v("ke.sh status")]),a._v(" "),s("td",{staticStyle:{"text-align":"center"}},[a._v("查看 Kafka Eagle 系统运行状态")])]),a._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[a._v("ke.sh stats")]),a._v(" "),s("td",{staticStyle:{"text-align":"center"}},[a._v("统计 Kafka Eagle 系统占用 Linux 资源情况")])]),a._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[a._v("ke.sh find [ClassName]")]),a._v(" "),s("td",{staticStyle:{"text-align":"center"}},[a._v("查看 Kafka Eagle 系统中的类是否存在")])])])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost kafka-eagle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$./bin/ke.sh start\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v("-07-07 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":21:03"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO: Starting  kafka eagle environment check "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n  created: META-INF/\n inflated: META-INF/MANIFEST.MF\n  created: WEB-INF/\n 。\n 。中间输出省略\n 。\n  created: META-INF/maven/org.smartloli.kafka.eagle/\n  created: META-INF/maven/org.smartloli.kafka.eagle/kafka-eagle-web/\n inflated: META-INF/maven/org.smartloli.kafka.eagle/kafka-eagle-web/pom.xml\n inflated: META-INF/maven/org.smartloli.kafka.eagle/kafka-eagle-web/pom.properties\n*******************************************************************\n* Kafka Eagle system monitor port successful"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n*******************************************************************\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v("-07-07 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":21:03"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO: Status Code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v("-07-07 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":21:03"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Job done"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nWelcome to\n    __ __    ___     ____    __ __    ___            ______    ___    ______    __     ______\n   / //_/   /   "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("   / __/   / //_/   /   "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("          / ____/   /   "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  / ____/   / /    / ____/\n  / ,"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("     / /"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  / /_    / ,"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("     / /"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("         / __/     / /"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" / / __    / /    / __/\n / /"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("   / ___ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" / __/   / /"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("   / ___ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("        / /___    / ___ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/ /_/ /   / /___ / /___\n/_/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("_"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  /_/  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("_"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/_/     /_/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("_"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  /_/  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("_"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("       /_____/   /_/  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("_"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("____/   /_____//_____/\nVersion "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.3")]),a._v(".3\n*******************************************************************\n* Kafka Eagle Service has started success.\n* Welcome, Now you can visit "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'http://<your_host_or_ip>:port/ke'")]),a._v("\n* Account:admin ,Password:123456\n*******************************************************************\n* "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("Usage"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ke.sh "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("stop"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/Usage"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n* "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("Usage"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" https://www.kafka-eagle.org/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/Usage"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n*******************************************************************\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br")])]),s("h3",{attrs:{id:"_6-访问。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-访问。"}},[a._v("#")]),a._v(" 6，访问。")]),a._v(" "),s("p",[a._v("接着就可以通过"),s("code",[a._v("http://<your_host_or_ip>:port/ke")]),a._v("进行访问了。")]),a._v(" "),s("p",[a._v("用户名密码是 "),s("code",[a._v("Account:admin ,Password:123456")]),a._v("。")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/1e5bfc1f932e79a3.jpg",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"_7-监控趋势图。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-监控趋势图。"}},[a._v("#")]),a._v(" 7，监控趋势图。")]),a._v(" "),s("p",[a._v("Kafka 系统默认是没有开启 JMX 端口的，所以 Kafka Eagle 的监控趋势图默认采用不启用的方式，即"),s("code",[a._v("kafka.eagle.metrics.charts=false")]),a._v("。")]),a._v(" "),s("p",[a._v("如果需要查看监控趋势图，需要开启 Kafka 系统的 JMX 端口，设置该端口在 $KAFKA_HOME/bin/kafka-server-start.sh 脚本中，设置内容如下：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"x'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KAFKA_HEAP_OPTS")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"x"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_HEAP_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-server -Xms2G -Xmx2G -XX:PermSize=128m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:ParallelGCThreads=8 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JMX_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"9999"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('#export KAFKA_HEAP_OPTS="-Xmx1G -Xms1G"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("然后将集群的 kafka 重启，在重启 kafka eagle，就能看到相关的监控了。")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/be2235d665538a82.jpg",alt:"image"}})]),a._v(" "),s("h2",{attrs:{id:"_3-参考。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-参考。"}},[a._v("#")]),a._v(" 3，参考。")]),a._v(" "),s("ul",[s("li",[a._v("http://t.cn/RDbk79P")])])])}),[],!1,null,null,null);s.default=n.exports}}]);