(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{507:function(a,s,t){"use strict";t.r(s);var e=t(0),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("watch 命令能够将其他命令的输出定时输出到终端，从而实现监听的能力，在我们要对一些命令状态进行实时监听的场景中，有非常好的应用场景。")]),a._v(" "),s("h2",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$watch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v("\n\nUsage:\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v("\n\nOptions:\n  -b, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--beep")]),a._v("             如果命令具有非零退出，则发出蜂鸣音\n  -c, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--color")]),a._v("            解释ANSI颜色和样式序列\n  -d, --differences"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("permanent"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n                         高亮显示两次更新之间的变化\n  -e, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--errexit")]),a._v("          如果命令有非零退出，则退出\n  -g, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--chgexit")]),a._v("          当命令的输出发生变化时退出\n  -n, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--interval")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("secs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  两次更新之间的等待秒数\n  -p, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--precise")]),a._v("          尝试以精确的时间间隔运行命令\n  -t, --no-title         关闭watch命令在顶部的时间间隔,命令，当前时间的输出\n  -x, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--exec")]),a._v("             将命令传递给exec，而不是 "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sh -c"')]),a._v("\n\n -h, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("     display this "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v(" and "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n -v, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("  output version information and "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n\nFor "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details see watch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(".\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br")])]),s("h2",{attrs:{id:"常用例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用例子"}},[a._v("#")]),a._v(" 常用例子")]),a._v(" "),s("p",[a._v("比较常用的参数有 "),s("code",[a._v("-n")]),a._v(" "),s("code",[a._v("-d")]),a._v("。")]),a._v(" "),s("p",[a._v("监听当前目录下文件变化：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("监听系统中 TCP 连接状态的变化：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"netstat -an  | awk '/tcp/ {print \\"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$6")]),a._v("}'| sort | uniq -c\"")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("blockquote",[s("ul",[s("li",[a._v("watch 后边如果带有管道符，则用双引号将后边的命令包裹成一个整体。")]),a._v(" "),s("li",[a._v("另外，当 awk 的 print 被双引号包裹之后，需要在$符号前边加个转义符。")])])]),a._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2022/10/7e7084eb4345ad0d.jpg",alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);