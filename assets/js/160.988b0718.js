(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{503:function(s,a,t){"use strict";t.r(a);var e=t(0),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("有一个场景，有一个域名解析到了很多机器，在扩容的时候，会新增解到新的机器上，但是在前端真正放量之前，我们需要对这些新增的做一下验证，此时就要用到域名与 IP 的对应关系来进行验证。")]),s._v(" "),a("p",[s._v("一个方案是通过绑定 hosts 来指定，不过还可以直接使用 curl 加参数的方式来做。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方法一，好用")]),s._v(" "),a("p",[a("code",[s._v("curl url -x ip:port")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" abc.com "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.3")]),s._v(".7.7:80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此时请求 abc.com 会转到对应主机的对应端口。")])]),s._v(" "),a("li",[a("p",[s._v("方法二")]),s._v(" "),a("p",[a("code",[s._v("curl -H 'Host:baidu.com' http://10.12.20.21")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HOST:abc.com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.3")]),s._v(".7.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/4faafe7b3e7ca49b.jpg",alt:"7c500d5870a50a28add243c469fb2aad"}})]),s._v(" "),a("p",[s._v("如上两种方式都只能测试 http 协议的请求，如果想要测试 HTTPS 的请求，则可以用如下方式：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方法三")]),s._v(" "),a("p",[a("code",[s._v("curl --resolve host:port:address")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTP")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://abc.com/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--resolve")]),s._v(" abc.com:80:10.3.7.7\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTPS")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://abc.com/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--resolve")]),s._v(" abc.com:443:10.3.7.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);