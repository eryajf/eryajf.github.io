(window.webpackJsonp=window.webpackJsonp||[]).push([[365],{710:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ Jenkins å®Œæˆäº†é¡¹ç›®ä¸Šçº¿æ•´ä¸ª CICD çš„æµç¨‹ï¼Œè¿™æ˜¯åº”å¯¹é«˜é€Ÿå‘å±•çš„ä¸šåŠ¡çš„æ–¹æ¡ˆï¼Œéšç€ä¸šåŠ¡è¿›ç¨‹çš„å‘å±•ï¼Œä¸€å®šä¼šåˆ°ä¸€ä¸ªä»¥ç¨³å®šä¸ºç¬¬ä¸€è¦åŠ¡çš„é˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œä¿éšœé«˜è´¨é‡çš„ä»£ç ä¸Šçº¿æ˜¯å…¶æ ¸å¿ƒï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å°±éœ€è¦ç€æ‰‹é’ˆå¯¹ä»£ç æ£€æµ‹åšä¸€äº›å·¥ä½œã€‚")]),t._v(" "),s("p",[t._v("è¿™äº›å·¥ä½œï¼Œå¯ä»¥é€šè¿‡ä¸ Gitlab ç»“åˆçš„é™æ€ ci æ£€æµ‹æ¥è¿›è¡Œï¼Œå¾ˆå¤šåœ°æ–¹ä»‹ç»çš„éƒ½æ˜¯åŸºäº gitlab-ci æˆ–è€…å…¶ä»–è¯¸å¦‚ drone ä¹‹ç±»çš„å·¥å…·æ¥è¿›è¡Œï¼Œæˆ‘è¿™é‡Œåˆ™ç»“åˆ Jenkins æ¥è¿›è¡Œåˆ†æã€‚å› ä¸ºåœ¨æˆ‘çš„æ¦‚å¿µä¸­ï¼Œä¸€ç›´è§‰å¾— gitlab å¥½å¥½åšä¸€ä¸ªä»£ç ç®¡ç†å·¥å…·å°±å¯ä»¥äº†ï¼Œä¸å¿…å¼•å…¥è¿‡å¤šå¤–éƒ¨ä¾èµ–ï¼Œä»è€Œç»™ä»£ç ç®¡ç†æœ¬èº«å¸¦æ¥ä¸ç¨³å®šå› ç´ ã€‚")]),t._v(" "),s("p",[t._v("ä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘è¿™é‡Œä»¥ä¸€ä¸ª NGINX é…ç½®æ–‡ä»¶é›†æˆçš„åœºæ™¯æ¥è¿›è¡Œè®²è§£ã€‚")]),t._v(" "),s("p",[t._v("ä¸€äº›ç°å®æ•™è®­å‘Šè¯‰æˆ‘ä»¬ï¼Œå¾ˆå¤šæ—¶å€™çš„æ•…éšœæˆ–è€…å¼‚å¸¸è¶… 80%éƒ½æ˜¯å› ä¸º"),s("code",[t._v("å˜æ›´")]),t._v("å¼•èµ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ‰€æœ‰ NGINX çš„é…ç½®æ”¶å½’åˆ° gitlab è¿›è¡Œç®¡ç†ï¼Œå¦‚æœè¦è°ƒæ•´å°±èµ°ä»£ç ä¸Šçº¿çš„æµç¨‹ï¼Œå‡å°‘ç›´æ¥ä¸Šæœºæ“ä½œçš„æ¬¡æ•°ã€‚")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å±•ç¤ºæ•´ä¸ªé…ç½®æµç¨‹ï¼Œä¸»è¦åˆ†äº«æ€è·¯ï¼Œå…·ä½“é™æ€æ£€æŸ¥é€»è¾‘æ ¹æ®éœ€æ±‚å¯è¿›è¡Œè°ƒæ•´ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_1-gitlab-é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-gitlab-é…ç½®"}},[t._v("#")]),t._v(" 1ï¼Œgitlab é…ç½®")]),t._v(" "),s("p",[t._v("gitlab é…ç½®çš„æ ¸å¿ƒåœ¨äºï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ§åˆ¶ä¸€äº›æŒ‡å®šåˆ†æ”¯çš„æƒé™ï¼Œæ¯”å¦‚æ§åˆ¶ master åˆ†æ”¯ä¸èƒ½ç›´æ¥ pushï¼Œä¸”ä»…æœ‰"),s("code",[t._v("Maintainers")]),t._v("æƒé™çš„äººèƒ½å¤Ÿ mergeï¼Œé…ç½®ä½ç½®ï¼šè¿›å…¥"),s("code",[t._v("é¡¹ç›®")]),t._v("---\x3e"),s("code",[t._v("Settings")]),t._v("---\x3e"),s("code",[t._v("Repository")]),t._v("---\x3e"),s("code",[t._v("Protected Branches")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a3c8202caf9a7d3d.jpg",alt:"image-20210822162832429"}})]),t._v(" "),s("p",[t._v("è¿™æ ·æˆ‘ä»¬åªæŠŠéƒ¨åˆ† leader èµ‹äºˆ"),s("code",[t._v("Maintainers")]),t._v("æƒé™ï¼Œå³å¯æ§åˆ¶åˆ°ä»£ç çš„ä¸Šçº¿ï¼Œå¿…é¡»ç»è¿‡è¿™å‡ ä¸ªå¤§ä½¬çš„æ‰‹æ‰è¡Œã€‚")]),t._v(" "),s("p",[s("code",[t._v("æ³¨æ„ï¼š")]),t._v("å¦‚æœåœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œè¿™é‡Œè¦æ§åˆ¶çš„åˆ†æ”¯ï¼Œä¹Ÿè®¸ master æœªå¿…åˆé€‚ï¼Œå› ä¸º master å¸¸å¸¸åº”å¯¹ç€æ­£å¼ç¯å¢ƒåœ°å‘å¸ƒï¼Œè®²ç©¶ç¨³å®šçš„åŒæ—¶ä¹Ÿè€ƒè™‘ä¸€äº›ç´§æ€¥åœºæ™¯çš„æ•ˆç‡ï¼Œå› æ­¤ï¼Œå®é™…ç”Ÿäº§ä¸­ï¼Œæˆ–è®¸è¿™é‡Œæ§åˆ¶ä½é¢„å‘ç¯å¢ƒçš„ pre åˆ†æ”¯ä¼šæ›´åˆé€‚ï¼")]),t._v(" "),s("p",[t._v("æ¥ç€æˆ‘ä»¬è¦å‹¾é€‰ä¸€ä¸ªç›¸å½“é‡è¦çš„é…ç½®é¡¹ï¼Œ"),s("code",[t._v("only allow merge requests to be merged if the pipeline succeeds")]),t._v("ï¼Œé…ç½®ä½ç½®ï¼šè¿›å…¥"),s("code",[t._v("é¡¹ç›®")]),t._v("---\x3e"),s("code",[t._v("Settings")]),t._v("---\x3e"),s("code",[t._v("General")]),t._v("---\x3e"),s("code",[t._v("Merge request settings")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/9888088997568c9c.jpg",alt:"image-20210822163504049"}})]),t._v(" "),s("p",[t._v("æ­¤é…ç½®é¡¹å†³å®šäº†ä»…å½“æµæ°´çº¿æˆåŠŸæ—¶æ‰èƒ½å¤Ÿè¿›è¡Œ mergeï¼Œå¦åˆ™ merge æŒ‰é’®å°†ä¼šæ˜¯ç°è‰²çš„ï¼Œä½¿å¾—"),s("code",[t._v("Maintainers")]),t._v("æ— æ³•è¿›è¡Œä»£ç åˆå¹¶ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_2-jenkins-é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-jenkins-é…ç½®"}},[t._v("#")]),t._v(" 2ï¼ŒJenkins é…ç½®")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬åˆ›å»ºå¦‚ä¸‹æµæ°´çº¿ä½œä¸ºå½“å‰é¡¹ç›®çš„ ci é…ç½®ï¼š")]),t._v(" "),s("div",{staticClass:"language-groovy line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("pipeline "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    agent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        label "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"slave_test_go"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    environment "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡åç§°")]),t._v("\n        SERVICE_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("JOB_BASE_NAME")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n        MODE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DEPLOY"')])]),t._v("\n        REASON"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ— "')])]),t._v("\n        REMOTE_HOST"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å ä½"')])]),t._v("\n        _VERSION"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æµ‹è¯•éªŒè¯"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸»é¡¹ç›®åœ°å€")]),t._v("\n        GIT_URL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://gitlab.test.com/ops/openrestyConfig.git"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    parameters "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BRANCH'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defaultValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯·è¾“å…¥å°†è¦æ„å»ºçš„ä»£ç åˆ†æ”¯'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    options "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timestamps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡ºæ„å»ºæ—¥å¿—æ‰“å°æ—¶é—´ä¿¡æ¯")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MINUTES'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®æ„å»ºè¶…æ—¶æ—¶é—´")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildDiscarder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logRotator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("numToKeepStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'15'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®å†å²æ„å»ºä¿ç•™æ¬¡æ•°")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gitLabConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gitlab-token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ“ä½œgitlabçš„token")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    triggers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gitlab")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("triggerOnPush"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("triggerOnMergeRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("branchFilterType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'All'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("secretToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GIT_TOKEN")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é¢„ç•™Gitlabæäº¤è‡ªåŠ¨æ„å»º")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stages "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç½®ä¸ºpending'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                script "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        updateGitlabCommitStatus name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pending'")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REASON "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç½®ä¸ºpendingå‡ºé”™"')])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ‹‰å–ä»£ç '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                script "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CAUSE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentBuild"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBuildCauses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("CAUSE")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'null'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BRANCH "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'echo ${gitlabBranch}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  returnStdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" doGenerateSubmoduleConfigurations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" submoduleCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" extensions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CloneOption'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" depth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" noTags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reference"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" shallow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            branches"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("BRANCH")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("userRemoteConfigs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GIT_URL")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" credentialsId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cicd-pass"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šä¹‰å…¨å±€å˜é‡")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_ID   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%h'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  returnStdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤ID")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_USER "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%an'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" returnStdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤è€…")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_TIME "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%ai'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" returnStdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤æ—¶é—´")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_INFO "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%s'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  returnStdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤ä¿¡æ¯")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REASON "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ‹‰å–ä»£ç å‡ºé”™"')])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ£€æµ‹é¡¹ç›®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                script "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reg.test.com/base/openresty:1.19.3.2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inside")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" -v /etc/hosts:/etc/hosts"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            sh "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'''nginx -c $WORKSPACE/nginx.conf -t'''")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REASON "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ£€æµ‹é¡¹ç›®å‡ºé”™"')])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    post "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        success "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateGitlabCommitStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            addGitLabMRComment comment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ğŸ¤–Jenkins ci check successğŸ¥³, see the log: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("BUILD_URL")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('console"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        failure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateGitlabCommitStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'failed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            addGitLabMRComment comment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ğŸ¤–Jenkins ci check failedğŸ¤¯, see the log: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("BUILD_URL")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('console"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br")])]),s("p",[t._v("è¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("gitLabConnection")]),t._v("ï¼šè¦åœ¨ç³»ç»Ÿç®¡ç†ä¸­åˆ›å»ºä¸€ä¸ªå¯æ“ä½œ gitlab çš„ tokenï¼Œéå¸¸é‡è¦ï¼Œå¦‚æœæ²¡æœ‰æ­¤é¡¹é…ç½®ï¼Œåˆ™æµæ°´çº¿æ— æ³•å°†çŠ¶æ€å›è°ƒç»™ gitlab é¡¹ç›®ã€‚")]),t._v(" "),s("p",[t._v("é…ç½®ä½ç½®ï¼š"),s("code",[t._v("ç³»ç»Ÿç®¡ç†")]),t._v("---\x3e"),s("code",[t._v("ç³»ç»Ÿé…ç½®")]),t._v("---\x3e"),s("code",[t._v("Gitlab")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/3770bf89a888a130.jpg",alt:"image-20210822164215918"}})])]),t._v(" "),s("li",[s("p",[t._v("è¿™é‡Œé™åˆ¶äº† triggers æ¡ä»¶ä»…ä¸º merge æ—¶è§¦å‘ï¼Œå½“å‰è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚é™åˆ¶å›ºå®šåˆ†æ”¯ï¼Œä»è€Œå°† ci æ£€æµ‹æ§åˆ¶åœ¨æŒ‡å®šçš„èŒƒå›´é‡Œã€‚")])]),t._v(" "),s("li",[s("p",[t._v("è§¦å‘æ„å»ºä¹‹å‰ï¼Œé¦–å…ˆå°†çŠ¶æ€ç½®ä¸º penndingï¼Œä»è€Œè®© gitlab é¡¹ç›®æ— æ³• mergeã€‚")])]),t._v(" "),s("li",[s("p",[t._v("æ‹‰å®Œä»£ç ä¹‹åï¼Œæˆ‘ä»¬å€ŸåŠ©é›†æˆå¥½çš„é•œåƒå¯¹ NGINX é…ç½®æ–‡ä»¶è¿›è¡Œè¯­æ³•æ£€æµ‹ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ç„¶ååœ¨æœ€åå€ŸåŠ©æµæ°´çº¿çš„ post èƒ½åŠ›ï¼Œå°†ä¸åŒçš„çŠ¶æ€å›è°ƒç»™ gitlabã€‚")])])]),t._v(" "),s("p",[t._v("å…³äºå¦‚ä½•é…ç½®è‡ªåŠ¨è§¦å‘çš„æµæ°´çº¿ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œå¯ä»¥å‚è€ƒï¼š"),s("a",{attrs:{href:"https://wiki.eryajf.net/pages/3304.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‡ªåŠ¨æ„å»ºçš„åŸå§‹é…ç½®ä»¥åŠ pipeline ä¸­çš„ç”¨æ³•"),s("OutboundLink")],1),t._v("ã€‚åªä¸è¿‡åœ¨ gitlab æ·»åŠ  hook çš„æ—¶å€™ä»…é…ç½® merge event å³å¯ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_3-éªŒè¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-éªŒè¯"}},[t._v("#")]),t._v(" 3ï¼ŒéªŒè¯")]),t._v(" "),s("p",[t._v("è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥èµ°æ­£å¸¸å¼€å‘æµç¨‹ï¼Œæ–°éœ€æ±‚ä» master åˆ‡å‡ºæ¥ä¸€ä¸ªç‹¬ç«‹çš„åˆ†æ”¯ï¼Œè°ƒæ•´å®Œæˆä¹‹åï¼Œæäº¤è‡ªå·±çš„æ™®é€šåˆ†æ”¯ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª merge requestï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/2cbddb5eb14d97ad.jpg",alt:"image-20210822165603446"}})]),t._v(" "),s("p",[t._v("æ³¨æ„ï¼Œæ­¤æ—¶ merge æŒ‰é’®ä»æ—§æ˜¯ç»¿è‰²çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸è¶³ä¹‹å¤„ï¼Œåªæœ‰å½“æµæ°´çº¿å¼€å§‹è§¦å‘ï¼Œå°†çŠ¶æ€ç½®ä¸º pennding æ—¶æ‰ä¼šè½¬å˜ï¼Œå¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„åŠæ³•æ§åˆ¶è¿™ä¸ªæŒ‰é’®ï¼Œæ¬¢è¿ç•™è¨€äº¤æµã€‚")]),t._v(" "),s("p",[t._v("æ¥ç€å°±ä¼šè‡ªåŠ¨è§¦å‘æµæ°´çº¿è¿›è¡Œé™æ€æ£€æµ‹ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™ä¼šæœ‰å¦‚ä¸‹æ˜¾ç¤ºï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/d8e800c9af66d854.jpg",alt:"image-20210822165933221"}})]),t._v(" "),s("p",[t._v("æ­¤æ—¶éœ€è¦è¿›è¡Œ merge çš„åŒå­¦å…¶å®ä¸å¿…å†çº ç»“æäº¤é…ç½®æ–‡ä»¶çš„è¯­æ³•æ˜¯å¦æœ‰é—®é¢˜ï¼Œåªéœ€è¦ Review ä¸‹ Changes çš„å†…å®¹å³å¯å†³å®šæ˜¯å¦ mergeã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœå¤±è´¥ï¼Œåˆ™çŠ¶æ€å¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/1ee8805ae9e7d002.jpg",alt:"image-20210822171048655"}})]),t._v(" "),s("p",[t._v("æ³¨æ„ï¼Œå½“æµæ°´çº¿æ£€æµ‹å¤±è´¥ä¹‹åï¼Œgitlab çš„ merge çŠ¶æ€ä¹Ÿä¼šå˜æˆç°è‰²æ— æ³• mergeï¼Œå¹¶æç¤ºï¼š"),s("code",[t._v("The pipeline for this merge request failed. Please retry the job or push a new commit to fix the failure")]),t._v("ï¼Œé‚£ä¹ˆå¯¹åº”çš„å¼€å‘åŒå­¦å°±éœ€è¦è§£å†³æ‰å¯¹åº”çš„å†²çªæˆ–è€…é—®é¢˜ä¹‹åæ–¹å¯å†æ¬¡æäº¤ mergeï¼Œè‡ªå·±çš„ä»£ç æ‰èƒ½å¤Ÿé€šè¿‡è¿™é“å…³å¡è€Œä¸Šçº¿ã€‚")]),t._v(" "),s("p",[t._v("å…¶ä»–èµ„æ–™ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/jenkinsci/gitlab-plugin/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkins æ’ä»¶ gitlab-plugin çš„å®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);